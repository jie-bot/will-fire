{"remainingRequest":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\src\\components\\common\\printer.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\src\\components\\common\\printer.vue","mtime":1723904809918},{"path":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\babel.config.js","mtime":1720174139000},{"path":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1723800259159},{"path":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1723800259743},{"path":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1723800259159},{"path":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1723800259896}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIC8v5YaF5a65CiAgICBwcmludGVySW5mbzogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9LAogICAgLy/pgJ/luqYKICAgIGR1cmF0aW9uOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMTAwCiAgICB9LAogICAgLy/lu7bov58KICAgIGRlbGF5OiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMzAwMAogICAgfSwKICAgIHdvcmtpbmc6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIG9uY2U6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb250ZW50OiAiIiwKICAgICAgY3Vyc29yOiAwLAogICAgICB0aW1lcjogbnVsbCwKICAgICAgdGltZW91dDogbnVsbCwKICAgICAgcHJpbnQ6IHRydWUKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgaWYgKHRoaXMud29ya2luZykgewogICAgICAvL3RoaXMud29ya++8muW8leeUqOWHveaVsAogICAgICAvL3RoaXMud29yaygp77ya5omn6KGM5Ye95pWwCiAgICAgIHRoaXMuc3RhcnQodGhpcy53b3JrKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY29udGVudCA9IHRoaXMucHJpbnRlckluZm87CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgd29ya2luZzogZnVuY3Rpb24gd29ya2luZyhuZXdWYWwpIHsKICAgICAgdGhpcy50b0JlZ2luKCk7CiAgICB9LAogICAgcHJpbnRlckluZm86IGZ1bmN0aW9uIHByaW50ZXJJbmZvKG5ld1ZhbCkgewogICAgICB0aGlzLnRvQmVnaW4oKTsKICAgIH0sCiAgICBjdXJzb3I6IGZ1bmN0aW9uIGN1cnNvcihfY3Vyc29yKSB7CiAgICAgIC8vc2xpY2Uoc3RhcnQsZW5kKe+8muS4jeWMheWQq2VuZAogICAgICB0aGlzLmNvbnRlbnQgPSB0aGlzLnByaW50ZXJJbmZvLnNsaWNlKDAsIF9jdXJzb3IpOwogICAgfQogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvKioKICAgICAqIOWumuaXtgogICAgICovCiAgICBzdGFydDogZnVuY3Rpb24gc3RhcnQod29yaykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy/lu7bov58KICAgICAgdGhpcy50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgLy/pgJ/luqYKICAgICAgICBfdGhpcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHdvcmsoKTsKCiAgICAgICAgICBpZiAoX3RoaXMuY3Vyc29yID09PSAwIHx8IF90aGlzLmN1cnNvciA9PT0gX3RoaXMucHJpbnRlckluZm8ubGVuZ3RoICYmICFfdGhpcy5vbmNlKSB7CiAgICAgICAgICAgIC8v5q2k5aSE5Li65LqG5bu26L+fCiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoX3RoaXMudGltZXIpOwoKICAgICAgICAgICAgX3RoaXMuc3RhcnQoX3RoaXMud29yayk7CiAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLmN1cnNvciA9PT0gX3RoaXMucHJpbnRlckluZm8ubGVuZ3RoICYmIF90aGlzLm9uY2UpIHsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChfdGhpcy50aW1lcik7CiAgICAgICAgICB9CiAgICAgICAgfSwgX3RoaXMuZHVyYXRpb24pOwogICAgICB9LCB0aGlzLmRlbGF5KTsKICAgIH0sCgogICAgLyoqCiAgICAgKiDpgLvovpEKICAgICAqLwogICAgd29yazogZnVuY3Rpb24gd29yaygpIHsKICAgICAgdmFyIGN1cnNvciA9IHRoaXMuY3Vyc29yOwogICAgICBjdXJzb3IgKz0gdGhpcy5wcmludCA/IDEgOiAtMTsKCiAgICAgIGlmICh0aGlzLnByaW50KSB7CiAgICAgICAgaWYgKGN1cnNvciA9PT0gdGhpcy5wcmludGVySW5mby5sZW5ndGggKyAxKSB7CiAgICAgICAgICBjdXJzb3IgLT0gMjsKICAgICAgICAgIHRoaXMucHJpbnQgPSAhdGhpcy5wcmludDsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGN1cnNvciA9PT0gLTEpIHsKICAgICAgICAgIGN1cnNvciArPSAyOwogICAgICAgICAgdGhpcy5wcmludCA9ICF0aGlzLnByaW50OwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5jdXJzb3IgPSBjdXJzb3I7CiAgICB9LAogICAgdG9CZWdpbjogZnVuY3Rpb24gdG9CZWdpbigpIHsKICAgICAgdGhpcy5jdXJzb3IgPSAwOwoKICAgICAgaWYgKHRoaXMudGltZW91dCAhPT0gbnVsbCkgewogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpOwoKICAgICAgICBpZiAodGhpcy50aW1lciAhPT0gbnVsbCkgewogICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLndvcmtpbmcpIHsKICAgICAgICB0aGlzLnN0YXJ0KHRoaXMud29yayk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jb250ZW50ID0gdGhpcy5wcmludGVySW5mbzsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;AAMA;EACAA;IACA;IACAC;MACAC,YADA;MAEAC;IAFA,CAFA;IAMA;IACAC;MACAF,YADA;MAEAC;IAFA,CAPA;IAWA;IACAE;MACAH,YADA;MAEAC;IAFA,CAZA;IAgBAG;MACAJ,aADA;MAEAC;IAFA,CAhBA;IAoBAI;MACAL,aADA;MAEAC;IAFA;EApBA,CADA;EA0BAK,IA1BA,kBA0BA;IACA;MACAC,WADA;MAEAC,SAFA;MAGAC,WAHA;MAIAC,aAJA;MAKAC;IALA;EAOA,CAlCA;EAmCAC,OAnCA,qBAmCA;IACA;MACA;MACA;MACA;IACA,CAJA,MAIA;MACA;IACA;EACA,CA3CA;EA4CAC;IACAT,OADA,mBACAU,MADA,EACA;MACA;IACA,CAHA;IAIAf,WAJA,uBAIAe,MAJA,EAIA;MACA;IACA,CANA;IAOAN,MAPA,kBAOAA,OAPA,EAOA;MACA;MACA;IACA;EAVA,CA5CA;EAwDAO,aAxDA,2BAwDA;IACAC;EACA,CA1DA;EA2DAC;IACA;AACA;AACA;IACAC,KAJA,iBAIAC,IAJA,EAIA;MAAA;;MACA;MACA;QACA;QACA;UACAA;;UACA;YACA;YACAH;;YACA;UACA,CAJA,MAIA;YACAA;UACA;QACA,CATA,EASA,cATA;MAUA,CAZA,EAYA,UAZA;IAaA,CAnBA;;IAoBA;AACA;AACA;IACAG,IAvBA,kBAuBA;MACA;MACAX;;MACA;QACA;UACAA;UACA;QACA;MACA,CALA,MAKA;QACA;UACAA;UACA;QACA;MACA;;MACA;IACA,CAtCA;IAuCAY,OAvCA,qBAuCA;MACA;;MACA;QACAC;;QACA;UACAL;QACA;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA;EApDA;AA3DA","names":["props","printerInfo","type","default","duration","delay","working","once","data","content","cursor","timer","timeout","print","created","watch","newVal","beforeDestroy","clearInterval","methods","start","work","toBegin","clearTimeout"],"sourceRoot":"src/components/common","sources":["printer.vue"],"sourcesContent":["<template>\n  <div>\n    <slot name=\"paper\" :content=\"content\"></slot>\n  </div>\n</template>\n<script>\n  export default {\n    props: {\n      //内容\n      printerInfo: {\n        type: String,\n        default: \"\"\n      },\n      //速度\n      duration: {\n        type: Number,\n        default: 100\n      },\n      //延迟\n      delay: {\n        type: Number,\n        default: 3000\n      },\n      working: {\n        type: Boolean,\n        default: true\n      },\n      once: {\n        type: Boolean,\n        default: false\n      }\n    },\n    data() {\n      return {\n        content: \"\",\n        cursor: 0,\n        timer: null,\n        timeout: null,\n        print: true\n      };\n    },\n    created() {\n      if (this.working) {\n        //this.work：引用函数\n        //this.work()：执行函数\n        this.start(this.work);\n      } else {\n        this.content = this.printerInfo\n      }\n    },\n    watch: {\n      working(newVal) {\n        this.toBegin();\n      },\n      printerInfo(newVal) {\n        this.toBegin();\n      },\n      cursor(cursor) {\n        //slice(start,end)：不包含end\n        this.content = this.printerInfo.slice(0, cursor)\n      }\n    },\n    beforeDestroy() {\n      clearInterval(this.timer);\n    },\n    methods: {\n      /**\n       * 定时\n       */\n      start(work) {\n        //延迟\n        this.timeout = setTimeout(() => {\n          //速度\n          this.timer = setInterval(() => {\n            work();\n            if (this.cursor === 0 || (this.cursor === this.printerInfo.length && !this.once)) {\n              //此处为了延迟\n              clearInterval(this.timer);\n              this.start(this.work);\n            } else if (this.cursor === this.printerInfo.length && this.once) {\n              clearInterval(this.timer);\n            }\n          }, this.duration);\n        }, this.delay)\n      },\n      /**\n       * 逻辑\n       */\n      work() {\n        let cursor = this.cursor;\n        cursor += this.print ? 1 : -1;\n        if (this.print) {\n          if (cursor === this.printerInfo.length + 1) {\n            cursor -= 2;\n            this.print = !this.print;\n          }\n        } else {\n          if (cursor === -1) {\n            cursor += 2;\n            this.print = !this.print;\n          }\n        }\n        this.cursor = cursor;\n      },\n      toBegin() {\n        this.cursor = 0;\n        if (this.timeout !== null) {\n          clearTimeout(this.timeout);\n          if (this.timer !== null) {\n            clearInterval(this.timer);\n          }\n        }\n        if (this.working) {\n          this.start(this.work);\n        } else {\n          this.content = this.printerInfo;\n        }\n      }\n    }\n  };\n</script>\n"]}]}