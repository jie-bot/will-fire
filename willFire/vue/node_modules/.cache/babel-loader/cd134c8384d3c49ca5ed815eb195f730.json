{"remainingRequest":"D:\\code\\willFire\\vue\\node_modules\\thread-loader\\dist\\cjs.js!D:\\code\\willFire\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\code\\willFire\\vue\\src\\utils\\live2d.js","dependencies":[{"path":"D:\\code\\willFire\\vue\\src\\utils\\live2d.js","mtime":1723950066005},{"path":"D:\\code\\willFire\\vue\\babel.config.js","mtime":1720174139000},{"path":"D:\\code\\willFire\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1723800259159},{"path":"D:\\code\\willFire\\vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1723800259150},{"path":"D:\\code\\willFire\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1723800259743}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L2NvZGUvd2lsbEZpcmUvdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkQ6L2NvZGUvd2lsbEZpcmUvdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5lbmRzLXdpdGguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwtc2VhcmNoLXBhcmFtcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNlYXJjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CgovKgogKiBMaXZlMkQgV2lkZ2V0CiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9zdGV2ZW5qb2V6aGFuZy9saXZlMmQtd2lkZ2V0CiAqLwppbXBvcnQgY29uc3RhbnQgZnJvbSAiLi9jb25zdGFudCI7IC8vIOazqOaEj++8mmxpdmUyZF9wYXRoIOWPguaVsOW6lOS9v+eUqOe7neWvuei3r+W+hAoKdmFyIGxpdmUyZF9wYXRoID0gY29uc3RhbnQubGl2ZTJkX3BhdGg7IC8vIOWKoOi9vSB3YWlmdS5jc3MgbGl2ZTJkLm1pbi5qcwoKaWYgKHNjcmVlbi53aWR0aCA+IDc2OCkgewogIFByb21pc2UuYWxsKFtsb2FkRXh0ZXJuYWxSZXNvdXJjZShsaXZlMmRfcGF0aCArICJ3YWlmdS5jc3MiLCAiY3NzIiksIGxvYWRFeHRlcm5hbFJlc291cmNlKGxpdmUyZF9wYXRoICsgImxpdmUyZC5taW4uanMiLCAianMiKV0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgaW5pdFdpZGdldCh7CiAgICAgIHdhaWZ1UGF0aDogY29uc3RhbnQuYmFzZVVSTCArIGNvbnN0YW50LndhaWZ1UGF0aCwKICAgICAgY2RuUGF0aDogY29uc3RhbnQuY2RuUGF0aAogICAgfSk7CiAgfSk7Cn0gLy8g5bCB6KOF5byC5q2l5Yqg6L296LWE5rqQ55qE5pa55rOVCgoKZnVuY3Rpb24gbG9hZEV4dGVybmFsUmVzb3VyY2UodXJsLCB0eXBlKSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIHZhciB0YWc7CgogICAgaWYgKHR5cGUgPT09ICJjc3MiKSB7CiAgICAgIHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpbmsiKTsKICAgICAgdGFnLnJlbCA9ICJzdHlsZXNoZWV0IjsKICAgICAgdGFnLmhyZWYgPSB1cmw7CiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICJqcyIpIHsKICAgICAgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7CiAgICAgIHRhZy5zcmMgPSB1cmw7CiAgICB9CgogICAgaWYgKHRhZykgewogICAgICB0YWcub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiByZXNvbHZlKHVybCk7CiAgICAgIH07CgogICAgICB0YWcub25lcnJvciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gcmVqZWN0KHVybCk7CiAgICAgIH07CgogICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHRhZyk7CiAgICB9CiAgfSk7Cn0KCmZ1bmN0aW9uIGluaXRXaWRnZXQoY29uZmlnKSB7CiAgZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEhUTUwoImJlZm9yZWVuZCIsICI8ZGl2IGlkPVwid2FpZnUtdG9nZ2xlXCI+XG5cdFx0XHQ8c3Bhbj5cdTUyQTlcdTYyNEI8L3NwYW4+XG5cdFx0PC9kaXY+Iik7CiAgdmFyIHRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ3YWlmdS10b2dnbGUiKTsKICB0b2dnbGUuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbiAoKSB7CiAgICB0b2dnbGUuY2xhc3NMaXN0LnJlbW92ZSgid2FpZnUtdG9nZ2xlLWFjdGl2ZSIpOwoKICAgIGlmICh0b2dnbGUuZ2V0QXR0cmlidXRlKCJmaXJzdC10aW1lIikpIHsKICAgICAgbG9hZFdpZGdldChjb25maWcpOwogICAgICB0b2dnbGUucmVtb3ZlQXR0cmlidXRlKCJmaXJzdC10aW1lIik7CiAgICB9IGVsc2UgewogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgid2FpZnUtZGlzcGxheSIpOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgid2FpZnUiKS5zdHlsZS5kaXNwbGF5ID0gIiI7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ3YWlmdSIpLnN0eWxlLmJvdHRvbSA9IDA7CiAgICAgIH0sIDApOwogICAgfQogIH0pOwoKICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oIndhaWZ1LWRpc3BsYXkiKSAmJiBEYXRlLm5vdygpIC0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIndhaWZ1LWRpc3BsYXkiKSA8PSA4NjQwMDAwMCkgewogICAgdG9nZ2xlLnNldEF0dHJpYnV0ZSgiZmlyc3QtdGltZSIsIHRydWUpOwogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIHRvZ2dsZS5jbGFzc0xpc3QuYWRkKCJ3YWlmdS10b2dnbGUtYWN0aXZlIik7CiAgICB9LCAwKTsKICB9IGVsc2UgewogICAgbG9hZFdpZGdldChjb25maWcpOwogIH0KfQoKZnVuY3Rpb24gbG9hZFdpZGdldChjb25maWcpIHsKICAvLyDphY3nva7ot6/lvoQKICB2YXIgd2FpZnVQYXRoID0gY29uZmlnLndhaWZ1UGF0aCwKICAgICAgY2RuUGF0aCA9IGNvbmZpZy5jZG5QYXRoOwogIGlmICghY2RuUGF0aC5lbmRzV2l0aCgiLyIpKSBjZG5QYXRoICs9ICIvIjsKICB2YXIgbW9kZWxMaXN0LAogICAgICBpZHggPSAwOyAvLyDmj5LlhaVodG1sCgogIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ3YWlmdS1kaXNwbGF5Iik7CiAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oIndhaWZ1LXRleHQiKTsKICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCgiYmVmb3JlZW5kIiwgIjxkaXYgaWQ9XCJ3YWlmdVwiPlxuXHRcdFx0PGRpdiBpZD1cIndhaWZ1LXRpcHNcIj48L2Rpdj5cblx0XHRcdDxjYW52YXMgaWQ9XCJsaXZlMmRcIiB3aWR0aD1cIjgwMFwiIGhlaWdodD1cIjgwMFwiPjwvY2FudmFzPlxuICAgICAgPCEtLSBcdTVERTVcdTUxNzcgLS0+XG5cdFx0XHQ8ZGl2IGlkPVwid2FpZnUtdG9vbFwiPlxuXHRcdFx0XHQ8c3BhbiBjbGFzcz1cImZhIGZhLWxnIGZhLWNvbW1lbnRcIj48L3NwYW4+XG5cdFx0XHRcdDxzcGFuIGNsYXNzPVwiZmEgZmEtbGcgZmEtc3RyZWV0LXZpZXdcIj48L3NwYW4+XG5cdFx0XHRcdDxzcGFuIGNsYXNzPVwiZmEgZmEtbGcgZmEtbW91c2UtcG9pbnRlclwiPjwvc3Bhbj5cblx0XHRcdFx0PHNwYW4gY2xhc3M9XCJmYSBmYS1sZyBmYS10aW1lc1wiPjwvc3Bhbj5cblx0XHRcdDwvZGl2PlxuXHRcdDwvZGl2PiIpOwogIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIndhaWZ1Iikuc3R5bGUuYm90dG9tID0gMDsKICB9LCAwKTsgLy8g5qOA5rWL55So5oi35rS75Yqo54q25oCB77yM5bm25Zyo56m66Zey5pe25pi+56S65raI5oGvCgogIHZhciB1c2VyQWN0aW9uID0gZmFsc2UsCiAgICAgIHVzZXJBY3Rpb25UaW1lciwKICAgICAgbWVzc2FnZVRpbWVyLAogICAgICBtZXNzYWdlQXJyYXkgPSBbIuaIkeeOsOWcqOWGs+WumuS6hu+8jOaIkeimgei1sOaIkeiHquW3seeahOW/jemBk++8jOacneedgOS4gOS4que7neWvueS4jeS8muWQjuaClOeahOi3r++8jOS4gOebtOW+gOWJjei1sOOAgiIsICLkurrmraPmmK/lm6DkuLrluqbov4fkuobkuIDmrrXpmLTmmpflsoHmnIjvvIzmiY3kvJrmm7TmuLTmsYLpu47mmI7nmoTmm5nlhYnjgIIiLCAi5pyJ5aSq5aSa55qE576B57uK5Y+q5Lya6K6p6Ieq5bex6L+35oOY77yM5by654OI55qE5oOz5rOV5ZKM54+N5oOc55qE5oCd5b+177yM5Y+q5Lya6K6p6Ieq5bex5Y+Y5byx44CCIiwgIua0u+edgOacrOadpeayoeacieS7gOS5iOaEj+S5ie+8jOS9huaYr+WPquimgea0u+edgO+8jOWwseWPr+S7peaJvuWIsOaciei2o+eahOS6i+aDheOAgiIsICLkurrmraPmmK/lm6DkuLrmnInkuobkuI3og73lv5jorrDnmoTlm57lv4bmiY3kvJrlnZrlvLrvvIzov5nlsLHmmK/miJDplb/llYrvvIEiLCAi5aaC5p6c5bCG5qKm5oOz5L2c5Li65L+h5Luw77yM5LiN5pS+5byD5Zyw6L+95rGC5LiL5Y6777yM5LiA5a6a5Lya5qKm5oOz5oiQ55yf55qE44CCIiwgIuecn+ato+eahOiDnOWIqe+8jOW5tuS4jeaYr+aImOiDnOW8uuiAhe+8jOaKiuiHquW3semHjeimgeeahOS4nOilv+S/neaKpOWIsOacgOWQjuS4gOWIu++8jOaJjeaYr+iDnOWIqeOAgiIsICLkurrnmoTlkb3ov5DmmK/lg4/kupHlvankuIDmoLflj6rog73pmo/po47mvILmtYHvvIzov5jmmK/or7TkupHlvanlroPoh6rlt7HpgInmi6nkuobmlrnlkJHjgIIiLCAi5pyo5Y+26aOe6Iie5LmL5aSE77yM54Gr5Lqm55Sf55Sf5LiN5oGvIl07CiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsIGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB1c2VyQWN0aW9uID0gdHJ1ZTsKICB9KTsKICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB1c2VyQWN0aW9uID0gdHJ1ZTsKICB9KTsKICBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICBpZiAodXNlckFjdGlvbikgewogICAgICB1c2VyQWN0aW9uID0gZmFsc2U7CiAgICAgIGNsZWFySW50ZXJ2YWwodXNlckFjdGlvblRpbWVyKTsKICAgICAgdXNlckFjdGlvblRpbWVyID0gbnVsbDsKICAgIH0gZWxzZSBpZiAoIXVzZXJBY3Rpb25UaW1lcikgewogICAgICB1c2VyQWN0aW9uVGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgc2hvd01lc3NhZ2UocmFuZG9tU2VsZWN0aW9uKG1lc3NhZ2VBcnJheSksIDYwMDAsIDkpOwogICAgICB9LCAyMDAwMCk7CiAgICB9CiAgfSwgMTAwMCk7IC8vIOebkeWQrOWZqAoKICAoZnVuY3Rpb24gcmVnaXN0ZXJFdmVudExpc3RlbmVyKCkgewogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3dhaWZ1LXRvb2wgLmZhLWNvbW1lbnQiKS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIHNob3dIaXRva290byk7CiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjd2FpZnUtdG9vbCAuZmEtc3RyZWV0LXZpZXciKS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGxvYWRSYW5kTW9kZWwpOwogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3dhaWZ1LXRvb2wgLmZhLW1vdXNlLXBvaW50ZXIiKS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGNoYW5nZU1vdXNlQW5pbWF0aW9uKTsKICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN3YWlmdS10b29sIC5mYS10aW1lcyIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24gKCkgewogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgid2FpZnUtZGlzcGxheSIsIERhdGUubm93KCkpOwogICAgICBzaG93TWVzc2FnZSgi5oS/5L2g5pyJ5LiA5aSp6IO95LiO6YeN6KaB55qE5Lq66YeN6YCi44CCIiwgMjAwMCwgMTEpOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgid2FpZnUiKS5zdHlsZS5ib3R0b20gPSAiLTUwMHB4IjsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIndhaWZ1Iikuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgid2FpZnUtdG9nZ2xlIikuY2xhc3NMaXN0LmFkZCgid2FpZnUtdG9nZ2xlLWFjdGl2ZSIpOwogICAgICB9LCAzMDAwKTsKICAgIH0pOwoKICAgIHZhciBkZXZ0b29scyA9IGZ1bmN0aW9uIGRldnRvb2xzKCkge307CgogICAgY29uc29sZS5sb2coIiVjIiwgZGV2dG9vbHMpOwoKICAgIGRldnRvb2xzLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewogICAgICBzaG93TWVzc2FnZSgi5ZOI5ZOI77yM5L2g5omT5byA5LqG5o6n5Yi25Y+w77yM5piv5oOz6KaB55yL55yL5oiR55qE5bCP56eY5a+G5ZCX77yfIiwgNjAwMCwgOSk7CiAgICB9OwoKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJjb3B5IiwgZnVuY3Rpb24gKCkgewogICAgICBzaG93TWVzc2FnZSgi5L2g6YO95aSN5Yi25LqG5Lqb5LuA5LmI5ZGA77yM6L2s6L296KaB6K6w5b6X5Yqg5LiK5Ye65aSE5ZOm77yBIiwgNjAwMCwgOSk7CiAgICB9KTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJ2aXNpYmlsaXR5Y2hhbmdlIiwgZnVuY3Rpb24gKCkgewogICAgICBpZiAoIWRvY3VtZW50LmhpZGRlbikgc2hvd01lc3NhZ2UoIuWTh++8jOS9oOe7iOS6juWbnuadpeS6hu+9niIsIDYwMDAsIDkpOwogICAgfSk7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgic2hvd01vdXNlQW5pbWF0aW9uIiwgIjEiKTsKICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImJvZHkiKS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIG1vdXNlQW5pbWF0aW9uKTsKICB9KSgpOyAvLyDmrKLov47pobUKCgogIChmdW5jdGlvbiB3ZWxjb21lTWVzc2FnZSgpIHsKICAgIHZhciB0ZXh0OwoKICAgIGlmIChsb2NhdGlvbi5wYXRobmFtZSA9PT0gIi8iKSB7CiAgICAgIC8vIOWmguaenOaYr+S4u+mhtQogICAgICB2YXIgbm93ID0gbmV3IERhdGUoKS5nZXRIb3VycygpOwogICAgICBpZiAobm93ID4gNSAmJiBub3cgPD0gNykgdGV4dCA9ICLml6nkuIrlpb3vvIHkuIDml6XkuYvorqHlnKjkuo7mmajvvIznvo7lpb3nmoTkuIDlpKnlsLHopoHlvIDlp4vkuobjgIIiO2Vsc2UgaWYgKG5vdyA+IDcgJiYgbm93IDw9IDExKSB0ZXh0ID0gIuS4iuWNiOWlve+8geW3peS9nOmhuuWIqeWYm++8jOS4jeimgeS5heWdkO+8jOWkmui1t+adpei1sOWKqOi1sOWKqOWTpu+8gSI7ZWxzZSBpZiAobm93ID4gMTEgJiYgbm93IDw9IDEzKSB0ZXh0ID0gIuS4reWNiOS6hu+8jOW3peS9nOS6huS4gOS4quS4iuWNiO+8jOeOsOWcqOaYr+WNiOmkkOaXtumXtO+8gSI7ZWxzZSBpZiAobm93ID4gMTMgJiYgbm93IDw9IDE3KSB0ZXh0ID0gIuWNiOWQjuW+iOWuueaYk+eKr+WbsOWRou+8jOS7iuWkqeeahOi/kOWKqOebruagh+WujOaIkOS6huWQl++8nyI7ZWxzZSBpZiAobm93ID4gMTcgJiYgbm93IDw9IDE5KSB0ZXh0ID0gIuWCjeaZmuS6hu+8geeql+WkluWklemYs+eahOaZr+iJsuW+iOe+juS4veWRou+8jOacgOe+juS4jei/h+WklemYs+e6ou+9niI7ZWxzZSBpZiAobm93ID4gMTkgJiYgbm93IDw9IDIxKSB0ZXh0ID0gIuaZmuS4iuWlve+8jOS7iuWkqei/h+W+l+aAjuS5iOagt++8nyI7ZWxzZSBpZiAobm93ID4gMjEgJiYgbm93IDw9IDIzKSB0ZXh0ID0gWyLlt7Lnu4/ov5nkuYjmmZrkuoblkYDvvIzml6nngrnkvJHmga/lkKfvvIzmmZrlronvvZ4iLCAi5rex5aSc5pe26KaB54ix5oqk55y8552b5ZGA77yBIl07ZWxzZSB0ZXh0ID0gIuS9oOaYr+WknOeMq+WtkOWRgO+8n+i/meS5iOaZmui/mOS4jeedoeinie+8jOaYjuWkqei1t+eahOadpeWYm++8nyI7CiAgICB9IGVsc2UgaWYgKGRvY3VtZW50LnJlZmVycmVyICE9PSAiIikgewogICAgICB2YXIgcmVmZXJyZXIgPSBuZXcgVVJMKGRvY3VtZW50LnJlZmVycmVyKSwKICAgICAgICAgIGRvbWFpbiA9IHJlZmVycmVyLmhvc3RuYW1lLnNwbGl0KCIuIilbMV07CiAgICAgIGlmIChsb2NhdGlvbi5ob3N0bmFtZSA9PT0gcmVmZXJyZXIuaG9zdG5hbWUpIHRleHQgPSAiXHU2QjIyXHU4RkNFXHU5NjA1XHU4QkZCPHNwYW4+XHUzMDBDIi5jb25jYXQoZG9jdW1lbnQudGl0bGUuc3BsaXQoIiAtICIpWzBdLCAiXHUzMDBEPC9zcGFuPiIpO2Vsc2UgaWYgKGRvbWFpbiA9PT0gImJhaWR1IikgdGV4dCA9ICJIZWxsb1x1RkYwMVx1Njc2NVx1ODFFQSBcdTc2N0VcdTVFQTZcdTY0MUNcdTdEMjIgXHU3Njg0XHU2NzBCXHU1M0NCPGJyPlx1NEY2MFx1NjYyRlx1NjQxQ1x1N0QyMiA8c3Bhbj4iLmNvbmNhdChyZWZlcnJlci5zZWFyY2guc3BsaXQoIiZ3ZD0iKVsxXS5zcGxpdCgiJiIpWzBdLCAiPC9zcGFuPiBcdTYyN0VcdTUyMzBcdTc2ODRcdTYyMTFcdTU0MTdcdUZGMUYiKTtlbHNlIGlmIChkb21haW4gPT09ICJzbyIpIHRleHQgPSAiSGVsbG9cdUZGMDFcdTY3NjVcdTgxRUEgMzYwXHU2NDFDXHU3RDIyIFx1NzY4NFx1NjcwQlx1NTNDQjxicj5cdTRGNjBcdTY2MkZcdTY0MUNcdTdEMjIgPHNwYW4+Ii5jb25jYXQocmVmZXJyZXIuc2VhcmNoLnNwbGl0KCImcT0iKVsxXS5zcGxpdCgiJiIpWzBdLCAiPC9zcGFuPiBcdTYyN0VcdTUyMzBcdTc2ODRcdTYyMTFcdTU0MTdcdUZGMUYiKTtlbHNlIGlmIChkb21haW4gPT09ICJnb29nbGUiKSB0ZXh0ID0gIkhlbGxvXHVGRjAxXHU2NzY1XHU4MUVBIFx1OEMzN1x1NkI0Q1x1NjQxQ1x1N0QyMiBcdTc2ODRcdTY3MEJcdTUzQ0I8YnI+XHU2QjIyXHU4RkNFXHU5NjA1XHU4QkZCPHNwYW4+XHUzMDBDIi5jb25jYXQoZG9jdW1lbnQudGl0bGUuc3BsaXQoIiAtICIpWzBdLCAiXHUzMDBEPC9zcGFuPiIpO2Vsc2UgdGV4dCA9ICJIZWxsb1x1RkYwMVx1Njc2NVx1ODFFQSA8c3Bhbj4iLmNvbmNhdChyZWZlcnJlci5ob3N0bmFtZSwgIjwvc3Bhbj4gXHU3Njg0XHU2NzBCXHU1M0NCIik7CiAgICB9IGVsc2UgewogICAgICB0ZXh0ID0gIlx1NkIyMlx1OEZDRVx1OTYwNVx1OEJGQjxzcGFuPlx1MzAwQyIuY29uY2F0KGRvY3VtZW50LnRpdGxlLnNwbGl0KCIgLSAiKVswXSwgIlx1MzAwRDwvc3Bhbj4iKTsKICAgIH0KCiAgICBzaG93TWVzc2FnZSh0ZXh0LCA3MDAwLCA4KTsKICB9KSgpOyAvLyDliJ3lp4vljJbmqKHlnosKCgogIChmdW5jdGlvbiBpbml0TW9kZWwoKSB7CiAgICB2YXIgbW9kZWxJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJtb2RlbElkIik7CgogICAgaWYgKG1vZGVsSWQgPT09IG51bGwpIHsKICAgICAgLy8g6aaW5qyh6K6/6Zeu5Yqg6L29IOaMh+WumuaooeWeiyDnmoQg5oyH5a6a5p2Q6LSoCiAgICAgIG1vZGVsSWQgPSA1OyAvLyDmqKHlnosgSUQKICAgIH0KCiAgICBsb2FkTW9kZWwobW9kZWxJZCk7CiAgICBmZXRjaCh3YWlmdVBhdGgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3ZlciIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyZXN1bHQubW91c2VvdmVyKSwKICAgICAgICAgICAgX3N0ZXA7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgX3N0ZXAkdmFsdWUgPSBfc3RlcC52YWx1ZSwKICAgICAgICAgICAgICAgIHNlbGVjdG9yID0gX3N0ZXAkdmFsdWUuc2VsZWN0b3IsCiAgICAgICAgICAgICAgICB0ZXh0ID0gX3N0ZXAkdmFsdWUudGV4dDsKICAgICAgICAgICAgaWYgKCFldmVudC50YXJnZXQubWF0Y2hlcyhzZWxlY3RvcikpIGNvbnRpbnVlOwogICAgICAgICAgICB0ZXh0ID0gcmFuZG9tU2VsZWN0aW9uKHRleHQpOwogICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKCJ7dGV4dH0iLCBldmVudC50YXJnZXQuaW5uZXJUZXh0KTsKICAgICAgICAgICAgc2hvd01lc3NhZ2UodGV4dCwgNDAwMCwgOCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyZXN1bHQuY2xpY2spLAogICAgICAgICAgICBfc3RlcDI7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgX3N0ZXAyJHZhbHVlID0gX3N0ZXAyLnZhbHVlLAogICAgICAgICAgICAgICAgc2VsZWN0b3IgPSBfc3RlcDIkdmFsdWUuc2VsZWN0b3IsCiAgICAgICAgICAgICAgICB0ZXh0ID0gX3N0ZXAyJHZhbHVlLnRleHQ7CiAgICAgICAgICAgIGlmICghZXZlbnQudGFyZ2V0Lm1hdGNoZXMoc2VsZWN0b3IpKSBjb250aW51ZTsKICAgICAgICAgICAgdGV4dCA9IHJhbmRvbVNlbGVjdGlvbih0ZXh0KTsKICAgICAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSgie3RleHR9IiwgZXZlbnQudGFyZ2V0LmlubmVyVGV4dCk7CiAgICAgICAgICAgIHNob3dNZXNzYWdlKHRleHQsIDQwMDAsIDgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmVzdWx0LnNlYXNvbnMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBkYXRlID0gX3JlZi5kYXRlLAogICAgICAgICAgICB0ZXh0ID0gX3JlZi50ZXh0OwogICAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpLAogICAgICAgICAgICBhZnRlciA9IGRhdGUuc3BsaXQoIi0iKVswXSwKICAgICAgICAgICAgYmVmb3JlID0gZGF0ZS5zcGxpdCgiLSIpWzFdIHx8IGFmdGVyOwoKICAgICAgICBpZiAoYWZ0ZXIuc3BsaXQoIi8iKVswXSA8PSBub3cuZ2V0TW9udGgoKSArIDEgJiYgbm93LmdldE1vbnRoKCkgKyAxIDw9IGJlZm9yZS5zcGxpdCgiLyIpWzBdICYmIGFmdGVyLnNwbGl0KCIvIilbMV0gPD0gbm93LmdldERhdGUoKSAmJiBub3cuZ2V0RGF0ZSgpIDw9IGJlZm9yZS5zcGxpdCgiLyIpWzFdKSB7CiAgICAgICAgICB0ZXh0ID0gcmFuZG9tU2VsZWN0aW9uKHRleHQpOwogICAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSgie3llYXJ9Iiwgbm93LmdldEZ1bGxZZWFyKCkpOwogICAgICAgICAgbWVzc2FnZUFycmF5LnB1c2godGV4dCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogIH0pKCk7IC8vIOaooeWei+mbhuWQiAoKCiAgZnVuY3Rpb24gbG9hZE1vZGVsTGlzdCgpIHsKICAgIHJldHVybiBfbG9hZE1vZGVsTGlzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0gLy8g6L295YWl5qih5Z6LCgoKICBmdW5jdGlvbiBfbG9hZE1vZGVsTGlzdCgpIHsKICAgIF9sb2FkTW9kZWxMaXN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgcmVzcG9uc2U7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goIiIuY29uY2F0KGNkblBhdGgsICJtb2RlbF9saXN0Lmpzb24iKSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgbW9kZWxMaXN0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSk7CiAgICByZXR1cm4gX2xvYWRNb2RlbExpc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9CgogIGZ1bmN0aW9uIGxvYWRNb2RlbChfeCwgX3gyKSB7CiAgICByZXR1cm4gX2xvYWRNb2RlbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0gLy8g5o2i6IKkCgoKICBmdW5jdGlvbiBfbG9hZE1vZGVsKCkgewogICAgX2xvYWRNb2RlbCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIobW9kZWxJZCwgbWVzc2FnZSkgewogICAgICB2YXIgdGFyZ2V0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJtb2RlbElkIiwgbW9kZWxJZCk7CiAgICAgICAgICAgICAgc2hvd01lc3NhZ2UobWVzc2FnZSwgNDAwMCwgMTApOwoKICAgICAgICAgICAgICBpZiAobW9kZWxMaXN0KSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gbG9hZE1vZGVsTGlzdCgpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIHRhcmdldCA9IHJhbmRvbVNlbGVjdGlvbihtb2RlbExpc3QubW9kZWxzW21vZGVsSWRdKTsgLy8gY29uc3QgdGFyZ2V0ID0gIkh5cGVyZGltZW5zaW9uTmVwdHVuaWEvYmxhbmNfc3dpbXdlYXIiOwoKICAgICAgICAgICAgICBsb2FkbGl2ZTJkKCJsaXZlMmQiLCAiIi5jb25jYXQoY2RuUGF0aCwgIm1vZGVsLyIpLmNvbmNhdCh0YXJnZXQsICIvaW5kZXguanNvbiIpKTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKTsKICAgIHJldHVybiBfbG9hZE1vZGVsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQoKICBmdW5jdGlvbiBsb2FkUmFuZE1vZGVsKCkgewogICAgcmV0dXJuIF9sb2FkUmFuZE1vZGVsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfSAvLyDmjaLkuroKCgogIGZ1bmN0aW9uIF9sb2FkUmFuZE1vZGVsKCkgewogICAgX2xvYWRSYW5kTW9kZWwgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICB2YXIgbW9kZWxJZCwgdGFyZ2V0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIG1vZGVsSWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibW9kZWxJZCIpOwoKICAgICAgICAgICAgICBpZiAobW9kZWxMaXN0KSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gbG9hZE1vZGVsTGlzdCgpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHRhcmdldCA9IHJhbmRvbVNlbGVjdGlvbihtb2RlbExpc3QubW9kZWxzW21vZGVsSWRdKTsKICAgICAgICAgICAgICBsb2FkbGl2ZTJkKCJsaXZlMmQiLCAiIi5jb25jYXQoY2RuUGF0aCwgIm1vZGVsLyIpLmNvbmNhdCh0YXJnZXQsICIvaW5kZXguanNvbiIpKTsKICAgICAgICAgICAgICBzaG93TWVzc2FnZSgi5oiR55qE5paw6KGj5pyN5aW955yL5Zib77yfIiwgNDAwMCwgMTApOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTMpOwogICAgfSkpOwogICAgcmV0dXJuIF9sb2FkUmFuZE1vZGVsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQoKICBmdW5jdGlvbiBsb2FkT3RoZXJNb2RlbCgpIHsKICAgIHJldHVybiBfbG9hZE90aGVyTW9kZWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9IC8vIOi9rOaNoum8oOagh+WKqOeUuwoKCiAgZnVuY3Rpb24gX2xvYWRPdGhlck1vZGVsKCkgewogICAgX2xvYWRPdGhlck1vZGVsID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgdmFyIG1vZGVsSWQsIGluZGV4OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIG1vZGVsSWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibW9kZWxJZCIpOwoKICAgICAgICAgICAgICBpZiAobW9kZWxMaXN0KSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gbG9hZE1vZGVsTGlzdCgpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGluZGV4ID0gKyttb2RlbElkID49IG1vZGVsTGlzdC5tb2RlbHMubGVuZ3RoID8gMCA6IG1vZGVsSWQ7CiAgICAgICAgICAgICAgbG9hZE1vZGVsKGluZGV4LCBtb2RlbExpc3QubWVzc2FnZXNbaW5kZXhdKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU0KTsKICAgIH0pKTsKICAgIHJldHVybiBfbG9hZE90aGVyTW9kZWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9CgogIGZ1bmN0aW9uIGNoYW5nZU1vdXNlQW5pbWF0aW9uKCkgewogICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJzaG93TW91c2VBbmltYXRpb24iKSA9PT0gIjAiKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJzaG93TW91c2VBbmltYXRpb24iLCAiMSIpOwogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJib2R5IikuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBtb3VzZUFuaW1hdGlvbik7CiAgICAgIHNob3dNZXNzYWdlKCLlk4jlk4jvvIzopoHniaLorrDnpL7kvJrkuLvkuYnmoLjlv4Pku7flgLzop4Llk6bvvIEiLCA2MDAwLCA5KTsKICAgIH0gZWxzZSB7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJzaG93TW91c2VBbmltYXRpb24iLCAiMCIpOwogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJib2R5IikucmVtb3ZlRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBtb3VzZUFuaW1hdGlvbik7CiAgICAgIHNob3dNZXNzYWdlKCLku4rlpKnkvaDniLHlm73kuoblkJfvvJ8iLCA2MDAwLCA5KTsKICAgIH0KICB9IC8vIOm8oOagh+WKqOeUuwoKCiAgZnVuY3Rpb24gbW91c2VBbmltYXRpb24oZSkgewogICAgdmFyIGxpc3QgPSBuZXcgQXJyYXkoIuWvjOW8uiIsICLmsJHkuLsiLCAi5paH5piOIiwgIuWSjOiwkCIsICLoh6rnlLEiLCAi5bmz562JIiwgIuWFrOatoyIsICLms5XmsrsiLCAi54ix5Zu9IiwgIuaVrOS4miIsICLor5rkv6EiLCAi5Y+L5ZaEIik7CiAgICB2YXIgc3BhbiA9ICQoIjxzcGFuPiIpLnRleHQobGlzdFtpZHhdKTsKICAgIGlkeCA9IChpZHggKyAxKSAlIGxpc3QubGVuZ3RoOwogICAgdmFyIHggPSBlLnBhZ2VYLAogICAgICAgIHkgPSBlLnBhZ2VZOwogICAgc3Bhbi5jc3MoewogICAgICAiei1pbmRleCI6IDEwMDAsCiAgICAgICJ0b3AiOiB5IC0gMjAsCiAgICAgICJsZWZ0IjogeCwKICAgICAgInBvc2l0aW9uIjogImFic29sdXRlIiwKICAgICAgInBvaW50ZXItZXZlbnRzIjogIm5vbmUiLAogICAgICAiZm9udC13ZWlnaHQiOiAiYm9sZCIsCiAgICAgICJjb2xvciI6ICIjZmY2NjUxIgogICAgfSk7CiAgICAkKCJib2R5IikuYXBwZW5kKHNwYW4pOwogICAgc3Bhbi5hbmltYXRlKHsKICAgICAgInRvcCI6IHkgLSAxODAsCiAgICAgICJvcGFjaXR5IjogMAogICAgfSwgMTUwMCwgZnVuY3Rpb24gKCkgewogICAgICBzcGFuLnJlbW92ZSgpOwogICAgfSk7CiAgfSAvLyDpmo/mnLrpgInmi6kKCgogIGZ1bmN0aW9uIHJhbmRvbVNlbGVjdGlvbihvYmopIHsKICAgIHJldHVybiBBcnJheS5pc0FycmF5KG9iaikgPyBvYmpbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogb2JqLmxlbmd0aCldIDogb2JqOwogIH0gLy8g6ZqP5py66K+NCgoKICBmdW5jdGlvbiBzaG93SGl0b2tvdG8oKSB7CiAgICAvLyDlop7liqAgaGl0b2tvdG8uY24g55qEIEFQSQogICAgZmV0Y2goY29uc3RhbnQuaGl0b2tvdG8pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgdmFyIHRleHQgPSAiXHU4RkQ5XHU1M0U1XHU0RTAwXHU4QTAwXHU2NzY1XHU4MUVBIDxzcGFuPlx1MzAwQyIuY29uY2F0KHJlc3VsdC5mcm9tLCAiXHUzMDBEPC9zcGFuPlx1RkYwQ1x1NjYyRiA8c3Bhbj4iKS5jb25jYXQocmVzdWx0LmNyZWF0b3IsICI8L3NwYW4+IFx1NTcyOCBoaXRva290by5jbiBcdTYyOTVcdTdBM0ZcdTc2ODRcdTMwMDIiKTsKICAgICAgc2hvd01lc3NhZ2UocmVzdWx0LmhpdG9rb3RvLCA2MDAwLCA5KTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgc2hvd01lc3NhZ2UodGV4dCwgNDAwMCwgOSk7CiAgICAgIH0sIDYwMDApOwogICAgfSk7CiAgfSAvLyDmmL7npLrmtojmga8KCgogIGZ1bmN0aW9uIHNob3dNZXNzYWdlKHRleHQsIHRpbWVvdXQsIHByaW9yaXR5KSB7CiAgICBpZiAoIXRleHQgfHwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oIndhaWZ1LXRleHQiKSAmJiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgid2FpZnUtdGV4dCIpID4gcHJpb3JpdHkpIHJldHVybjsKCiAgICBpZiAobWVzc2FnZVRpbWVyKSB7CiAgICAgIGNsZWFyVGltZW91dChtZXNzYWdlVGltZXIpOwogICAgICBtZXNzYWdlVGltZXIgPSBudWxsOwogICAgfQoKICAgIHRleHQgPSByYW5kb21TZWxlY3Rpb24odGV4dCk7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgid2FpZnUtdGV4dCIsIHByaW9yaXR5KTsKICAgIHZhciB0aXBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIndhaWZ1LXRpcHMiKTsKICAgIHRpcHMuaW5uZXJIVE1MID0gdGV4dDsKICAgIHRpcHMuY2xhc3NMaXN0LmFkZCgid2FpZnUtdGlwcy1hY3RpdmUiKTsKICAgIG1lc3NhZ2VUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgid2FpZnUtdGV4dCIpOwogICAgICB0aXBzLmNsYXNzTGlzdC5yZW1vdmUoIndhaWZ1LXRpcHMtYWN0aXZlIik7CiAgICB9LCB0aW1lb3V0KTsKICB9Cn0="},null]}