{"remainingRequest":"D:\\code\\willFire\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\code\\willFire\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\code\\willFire\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\willFire\\vue\\src\\components\\common\\uploadPicture.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\willFire\\vue\\src\\components\\common\\uploadPicture.vue","mtime":1723964853960},{"path":"D:\\code\\willFire\\vue\\babel.config.js","mtime":1720174139000},{"path":"D:\\code\\willFire\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1723800259159},{"path":"D:\\code\\willFire\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1723800259743},{"path":"D:\\code\\willFire\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1723800259159},{"path":"D:\\code\\willFire\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1723800259896}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHVwbG9hZCBmcm9tICcuLi8uLi91dGlscy9hamF4VXBsb2FkJzsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBpc0FkbWluOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgcHJlZml4OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIKICAgIH0sCiAgICBsaXN0VHlwZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICJwaWN0dXJlIgogICAgfSwKICAgIHN0b3JlVHlwZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJkZWZhdWx0U3RvcmVUeXBlIikKICAgIH0sCiAgICBhY2NlcHQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiaW1hZ2UvKiIKICAgIH0sCiAgICBtYXhTaXplOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogNQogICAgfSwKICAgIG1heE51bWJlcjogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDUKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4ge307CiAgfSwKICBjb21wdXRlZDoge30sCiAgd2F0Y2g6IHt9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7fSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge30sCiAgbWV0aG9kczogewogICAgc3VibWl0VXBsb2FkOiBmdW5jdGlvbiBzdWJtaXRVcGxvYWQoKSB7CiAgICAgIHRoaXMuJHJlZnMudXBsb2FkLnN1Ym1pdCgpOwogICAgfSwKICAgIGN1c3RvbVVwbG9hZDogZnVuY3Rpb24gY3VzdG9tVXBsb2FkKG9wdGlvbnMpIHsKICAgICAgdmFyIHN1ZmZpeCA9ICIiOwoKICAgICAgaWYgKG9wdGlvbnMuZmlsZS5uYW1lLmxhc3RJbmRleE9mKCcuJykgIT09IC0xKSB7CiAgICAgICAgc3VmZml4ID0gb3B0aW9ucy5maWxlLm5hbWUuc3Vic3RyaW5nKG9wdGlvbnMuZmlsZS5uYW1lLmxhc3RJbmRleE9mKCcuJykpOwogICAgICB9CgogICAgICB2YXIga2V5ID0gdGhpcy5wcmVmaXggKyAiLyIgKyAoIXRoaXMuJGNvbW1vbi5pc0VtcHR5KHRoaXMuJHN0b3JlLnN0YXRlLmN1cnJlbnRVc2VyLnVzZXJuYW1lKSA/IHRoaXMuJHN0b3JlLnN0YXRlLmN1cnJlbnRVc2VyLnVzZXJuYW1lLnJlcGxhY2UoL1teYS16QS1aXS9nLCAnJykgKyB0aGlzLiRzdG9yZS5zdGF0ZS5jdXJyZW50VXNlci5pZCA6IHRoaXMuJHN0b3JlLnN0YXRlLmN1cnJlbnRBZG1pbi51c2VybmFtZS5yZXBsYWNlKC9bXmEtekEtWl0vZywgJycpICsgdGhpcy4kc3RvcmUuc3RhdGUuY3VycmVudEFkbWluLmlkKSArIG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMCkgKyBzdWZmaXg7CgogICAgICBpZiAodGhpcy5zdG9yZVR5cGUgPT09ICJsb2NhbCIpIHsKICAgICAgICB2YXIgZmQgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICBmZC5hcHBlbmQoImZpbGUiLCBvcHRpb25zLmZpbGUpOwogICAgICAgIGZkLmFwcGVuZCgib3JpZ2luYWxOYW1lIiwgb3B0aW9ucy5maWxlLm5hbWUpOwogICAgICAgIGZkLmFwcGVuZCgia2V5Iiwga2V5KTsKICAgICAgICBmZC5hcHBlbmQoInJlbGF0aXZlUGF0aCIsIGtleSk7CiAgICAgICAgZmQuYXBwZW5kKCJ0eXBlIiwgdGhpcy5wcmVmaXgpOwogICAgICAgIGZkLmFwcGVuZCgic3RvcmVUeXBlIiwgdGhpcy5zdG9yZVR5cGUpOwogICAgICAgIHJldHVybiB0aGlzLiRodHRwLnVwbG9hZCgiaHR0cDovLzQ3Ljk2Ljg2LjIyMzo4MDgxL2FwaSIgKyAiL3Jlc291cmNlL3VwbG9hZCIsIGZkLCB0aGlzLmlzQWRtaW4sIG9wdGlvbnMpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuc3RvcmVUeXBlID09PSAicWluaXUiKSB7CiAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgIHhoci5vcGVuKCdnZXQnLCAiaHR0cDovLzQ3Ljk2Ljg2LjIyMzo4MDgxL2FwaSIgKyAiL3Fpbml1L2dldFVwVG9rZW4/a2V5PSIgKyBrZXksIGZhbHNlKTsKCiAgICAgICAgaWYgKHRoaXMuaXNBZG1pbikgewogICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoIkF1dGhvcml6YXRpb24iLCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYWRtaW5Ub2tlbiIpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoIkF1dGhvcml6YXRpb24iLCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlclRva2VuIikpOwogICAgICAgIH0KCiAgICAgICAgdHJ5IHsKICAgICAgICAgIHhoci5zZW5kKCk7CiAgICAgICAgICB2YXIgcmVzID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTsKCiAgICAgICAgICBpZiAocmVzICE9PSBudWxsICYmIHJlcy5oYXNPd25Qcm9wZXJ0eSgiY29kZSIpICYmIHJlcy5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gewogICAgICAgICAgICAgIHRva2VuOiByZXMuZGF0YSwKICAgICAgICAgICAgICBrZXk6IGtleQogICAgICAgICAgICB9OwogICAgICAgICAgICByZXR1cm4gdXBsb2FkKG9wdGlvbnMpOwogICAgICAgICAgfSBlbHNlIGlmIChyZXMgIT09IG51bGwgJiYgcmVzLmhhc093blByb3BlcnR5KCJjb2RlIikgJiYgcmVzLmNvZGUgIT09IDIwMCkgewogICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLm1lc3NhZ2UpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCLmnI3liqHlvILluLjvvIEiKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZS5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvLyDmlofku7bkuIrkvKDmiJDlip/ml7bnmoTpkqnlrZAKICAgIGhhbmRsZVN1Y2Nlc3M6IGZ1bmN0aW9uIGhhbmRsZVN1Y2Nlc3MocmVzcG9uc2UsIGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIHZhciB1cmw7CgogICAgICBpZiAodGhpcy5zdG9yZVR5cGUgPT09ICJsb2NhbCIpIHsKICAgICAgICB1cmwgPSByZXNwb25zZS5kYXRhOwogICAgICB9IGVsc2UgaWYgKHRoaXMuc3RvcmVUeXBlID09PSAicWluaXUiKSB7CiAgICAgICAgdXJsID0gdGhpcy4kc3RvcmUuc3RhdGUuc3lzQ29uZmlnWydxaW5pdS5kb3dubG9hZFVybCddICsgcmVzcG9uc2Uua2V5OwogICAgICAgIHRoaXMuJGNvbW1vbi5zYXZlUmVzb3VyY2UodGhpcywgdGhpcy5wcmVmaXgsIHVybCwgZmlsZS5zaXplLCBmaWxlLnJhdy50eXBlLCBmaWxlLm5hbWUsICJxaW5pdSIsIHRoaXMuaXNBZG1pbik7CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoImFkZFBpY3R1cmUiLCB1cmwpOwogICAgfSwKICAgIGhhbmRsZUVycm9yOiBmdW5jdGlvbiBoYW5kbGVFcnJvcihlcnIsIGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgIG1lc3NhZ2U6IGVyciwKICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgIH0pOwogICAgfSwKICAgIC8vIOS4iuS8oOaWh+S7tuS5i+WJjeeahOmSqeWtkO+8jOWPguaVsOS4uuS4iuS8oOeahOaWh+S7tu+8jOiLpei/lOWbniBmYWxzZSDmiJbogIXov5Tlm54gUHJvbWlzZSDkuJTooqsgcmVqZWN077yM5YiZ5YGc5q2i5LiK5LygCiAgICBiZWZvcmVVcGxvYWQ6IGZ1bmN0aW9uIGJlZm9yZVVwbG9hZChmaWxlKSB7fSwKICAgIC8vIOaWh+S7tuWIl+ihqOenu+mZpOaWh+S7tuaXtueahOmSqeWtkAogICAgaGFuZGxlUmVtb3ZlOiBmdW5jdGlvbiBoYW5kbGVSZW1vdmUoZmlsZSwgZmlsZUxpc3QpIHt9LAogICAgLy8g5re75Yqg5paH5Lu244CB5LiK5Lyg5oiQ5Yqf5ZKM5LiK5Lyg5aSx6LSl5pe26YO95Lya6KKr6LCD55SoCiAgICBoYW5kbGVDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZShmaWxlLCBmaWxlTGlzdCkgewogICAgICB2YXIgZmxhZyA9IGZhbHNlOwoKICAgICAgaWYgKGZpbGUuc2l6ZSA+IHRoaXMubWF4U2l6ZSAqIDEwMjQgKiAxMDI0KSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAi5Zu+54mH5pyA5aSn5Li6IiArIHRoaXMubWF4U2l6ZSArICJN77yBIiwKICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIgogICAgICAgIH0pOwogICAgICAgIGZsYWcgPSB0cnVlOwogICAgICB9CgogICAgICBpZiAoZmxhZykgewogICAgICAgIGZpbGVMaXN0LnNwbGljZShmaWxlTGlzdC5zaXplIC0gMSwgMSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AAEA;EACAA;IACAC;MACAC,aADA;MAEAC;IAFA,CADA;IAKAC;MACAF,YADA;MAEAC;IAFA,CALA;IASAE;MACAH,YADA;MAEAC;IAFA,CATA;IAaAG;MACAJ,YADA;MAEAC;IAFA,CAbA;IAiBAI;MACAL,YADA;MAEAC;IAFA,CAjBA;IAqBAK;MACAN,YADA;MAEAC;IAFA,CArBA;IAyBAM;MACAP,YADA;MAEAC;IAFA;EAzBA,CADA;EAgCAO,IAhCA,kBAgCA;IACA;EACA,CAlCA;EAoCAC,YApCA;EAsCAC,SAtCA;EAwCAC,OAxCA,qBAwCA,CACA,CAzCA;EA2CAC,OA3CA,qBA2CA,CAEA,CA7CA;EA+CAC;IACAC,YADA,0BACA;MACA;IACA,CAHA;IAKAC,YALA,wBAKAC,OALA,EAKA;MACA;;MACA;QACAC;MACA;;MAEA;;MAEA;QACA;QACAC;QACAA;QACAA;QACAA;QACAA;QACAA;QAEA;MACA,CAVA,MAUA;QACA;QACAC;;QACA;UACAA;QACA,CAFA,MAEA;UACAA;QACA;;QAEA;UACAA;UACA;;UACA;YACAH;cACAI,eADA;cAEAC;YAFA;YAIA;UACA,CANA,MAMA;YACA;UACA,CAFA,MAEA;YACA;UACA;QACA,CAdA,CAcA;UACA;QACA;MACA;IACA,CAlDA;IAoDA;IACAC,aArDA,yBAqDAC,QArDA,EAqDAC,IArDA,EAqDAC,QArDA,EAqDA;MACA;;MACA;QACAC;MACA,CAFA,MAEA;QACAA;QACA;MACA;;MACA;IACA,CA9DA;IA+DAC,WA/DA,uBA+DAC,GA/DA,EA+DAJ,IA/DA,EA+DAC,QA/DA,EA+DA;MACA;QACAI,YADA;QAEA7B;MAFA;IAIA,CApEA;IAqEA;IACA8B,YAtEA,wBAsEAN,IAtEA,EAsEA,CACA,CAvEA;IAwEA;IACAO,YAzEA,wBAyEAP,IAzEA,EAyEAC,QAzEA,EAyEA,CACA,CA1EA;IA2EA;IACAO,YA5EA,wBA4EAR,IA5EA,EA4EAC,QA5EA,EA4EA;MACA;;MAEA;QACA;UACAI,sCADA;UAEA7B;QAFA;QAIAiC;MACA;;MAEA;QACAR;MACA;IACA;EA1FA;AA/CA","names":["props","isAdmin","type","default","prefix","listType","storeType","accept","maxSize","maxNumber","data","computed","watch","created","mounted","methods","submitUpload","customUpload","options","suffix","fd","xhr","token","key","handleSuccess","response","file","fileList","url","handleError","err","message","beforeUpload","handleRemove","handleChange","flag"],"sourceRoot":"src/components/common","sources":["uploadPicture.vue"],"sourcesContent":["<template>\n  <div>\n    <el-upload\n      class=\"upload-demo\"\n      ref=\"upload\"\n      multiple\n      drag\n      :action=\"$store.state.sysConfig.qiniuUrl\"\n      :on-change=\"handleChange\"\n      :before-upload=\"beforeUpload\"\n      :on-success=\"handleSuccess\"\n      :on-error=\"handleError\"\n      :on-remove=\"handleRemove\"\n      :http-request=\"customUpload\"\n      :list-type=\"listType\"\n      :accept=\"accept\"\n      :limit=\"maxNumber\"\n      :auto-upload=\"false\">\n      <div class=\"el-upload__text\">\n        <svg viewBox=\"0 0 1024 1024\" width=\"40\" height=\"40\">\n          <path\n            d=\"M666.2656 629.4528l-113.7664-112.4864c-20.7872-20.5824-54.3232-20.5312-75.1104 0.1024l-113.3056 112.4864c-20.8896 20.736-21.0432 54.528-0.256 75.4688 20.736 20.8896 54.528 21.0432 75.4688 0.256l22.6304-22.4256v189.5936c0 29.44 23.9104 53.3504 53.3504 53.3504s53.3504-23.9104 53.3504-53.3504v-189.5424l22.6816 22.4256a53.1456 53.1456 0 0 0 37.5296 15.4112c13.7728 0 27.4944-5.2736 37.9392-15.8208 20.6336-20.9408 20.4288-54.7328-0.512-75.4688z\"\n            fill=\"#FFE37B\"></path>\n          <path\n            d=\"M820.992 469.504h-5.376c-3.072-163.328-136.3456-294.8096-300.4416-294.8096S217.856 306.1248 214.784 469.504H209.408c-100.7104 0-182.3744 81.664-182.3744 182.3744s81.664 182.3744 182.3744 182.3744h209.7664V761.856c-30.208 5.5808-62.464-3.3792-85.6576-26.7264-37.3248-37.5808-37.0688-98.5088 0.512-135.7824l113.3056-112.4864c37.2224-36.9664 97.8432-37.0176 135.168-0.1536l113.7664 112.4864c18.2272 18.0224 28.3648 42.0864 28.5184 67.7376 0.1536 25.6512-9.728 49.8176-27.7504 68.0448a95.40096 95.40096 0 0 1-68.3008 28.5184c-5.9392 0-11.776-0.512-17.5104-1.5872v72.3456h209.7664c100.7104 0 182.3744-81.664 182.3744-182.3744S921.7024 469.504 820.992 469.504z\"\n            fill=\"#8C7BFD\"></path>\n        </svg>\n        <div>拖拽上传 / 点击上传</div>\n      </div>\n      <template v-if=\"listType === 'picture'\">\n        <div slot=\"tip\" class=\"el-upload__tip\">\n          一次最多上传{{maxNumber}}张图片，且每张图片不超过{{maxSize}}M！\n        </div>\n      </template>\n      <template v-else>\n        <div slot=\"tip\" class=\"el-upload__tip\">\n          一次最多上传{{maxNumber}}个文件，且每个文件不超过{{maxSize}}M！\n        </div>\n      </template>\n\n    </el-upload>\n\n    <div style=\"text-align: center;margin-top: 20px\">\n      <el-button type=\"success\" style=\"font-size: 12px\" @click=\"submitUpload\">\n        上传\n      </el-button>\n    </div>\n  </div>\n</template>\n\n<script>\n  import upload from '../../utils/ajaxUpload';\n\n  export default {\n    props: {\n      isAdmin: {\n        type: Boolean,\n        default: false\n      },\n      prefix: {\n        type: String,\n        default: \"\"\n      },\n      listType: {\n        type: String,\n        default: \"picture\"\n      },\n      storeType: {\n        type: String,\n        default: localStorage.getItem(\"defaultStoreType\")\n      },\n      accept: {\n        type: String,\n        default: \"image/*\"\n      },\n      maxSize: {\n        type: Number,\n        default: 5\n      },\n      maxNumber: {\n        type: Number,\n        default: 5\n      }\n    },\n\n    data() {\n      return {}\n    },\n\n    computed: {},\n\n    watch: {},\n\n    created() {\n    },\n\n    mounted() {\n\n    },\n\n    methods: {\n      submitUpload() {\n        this.$refs.upload.submit();\n      },\n\n      customUpload(options) {\n        let suffix = \"\";\n        if (options.file.name.lastIndexOf('.') !== -1) {\n          suffix = options.file.name.substring(options.file.name.lastIndexOf('.'));\n        }\n\n        let key = this.prefix + \"/\" + (!this.$common.isEmpty(this.$store.state.currentUser.username) ? (this.$store.state.currentUser.username.replace(/[^a-zA-Z]/g, '') + this.$store.state.currentUser.id) : (this.$store.state.currentAdmin.username.replace(/[^a-zA-Z]/g, '') + this.$store.state.currentAdmin.id)) + new Date().getTime() + Math.floor(Math.random() * 1000) + suffix;\n\n        if (this.storeType === \"local\") {\n          let fd = new FormData();\n          fd.append(\"file\", options.file);\n          fd.append(\"originalName\", options.file.name);\n          fd.append(\"key\", key);\n          fd.append(\"relativePath\", key);\n          fd.append(\"type\", this.prefix);\n          fd.append(\"storeType\", this.storeType);\n\n          return this.$http.upload(\"http://47.96.86.223:8081/api\" + \"/resource/upload\", fd, this.isAdmin, options);\n        } else if (this.storeType === \"qiniu\") {\n          const xhr = new XMLHttpRequest();\n          xhr.open('get', \"http://47.96.86.223:8081/api\" + \"/qiniu/getUpToken?key=\" + key, false);\n          if (this.isAdmin) {\n            xhr.setRequestHeader(\"Authorization\", localStorage.getItem(\"adminToken\"));\n          } else {\n            xhr.setRequestHeader(\"Authorization\", localStorage.getItem(\"userToken\"));\n          }\n\n          try {\n            xhr.send();\n            const res = JSON.parse(xhr.responseText);\n            if (res !== null && res.hasOwnProperty(\"code\") && res.code === 200) {\n              options.data = {\n                token: res.data,\n                key: key\n              };\n              return upload(options);\n            } else if (res !== null && res.hasOwnProperty(\"code\") && res.code !== 200) {\n              return Promise.reject(res.message);\n            } else {\n              return Promise.reject(\"服务异常！\");\n            }\n          } catch (e) {\n            return Promise.reject(e.message);\n          }\n        }\n      },\n\n      // 文件上传成功时的钩子\n      handleSuccess(response, file, fileList) {\n        let url;\n        if (this.storeType === \"local\") {\n          url = response.data;\n        } else if (this.storeType === \"qiniu\") {\n          url = this.$store.state.sysConfig['qiniu.downloadUrl'] + response.key;\n          this.$common.saveResource(this, this.prefix, url, file.size, file.raw.type, file.name, \"qiniu\", this.isAdmin);\n        }\n        this.$emit(\"addPicture\", url);\n      },\n      handleError(err, file, fileList) {\n        this.$message({\n          message: err,\n          type: \"error\"\n        });\n      },\n      // 上传文件之前的钩子，参数为上传的文件，若返回 false 或者返回 Promise 且被 reject，则停止上传\n      beforeUpload(file) {\n      },\n      // 文件列表移除文件时的钩子\n      handleRemove(file, fileList) {\n      },\n      // 添加文件、上传成功和上传失败时都会被调用\n      handleChange(file, fileList) {\n        let flag = false;\n\n        if (file.size > this.maxSize * 1024 * 1024) {\n          this.$message({\n            message: \"图片最大为\" + this.maxSize + \"M！\",\n            type: \"warning\"\n          });\n          flag = true;\n        }\n\n        if (flag) {\n          fileList.splice(fileList.size - 1, 1);\n        }\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}