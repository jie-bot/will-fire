{"remainingRequest":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\src\\utils\\ajaxUpload.js","dependencies":[{"path":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\src\\utils\\ajaxUpload.js","mtime":1720174139000},{"path":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\babel.config.js","mtime":1720174139000},{"path":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1723800259159},{"path":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1723800259743}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CgpmdW5jdGlvbiBnZXRFcnJvcihhY3Rpb24sIG9wdGlvbiwgeGhyKSB7CiAgdmFyIG1zZzsKCiAgaWYgKHhoci5yZXNwb25zZSkgewogICAgbXNnID0gIiIuY29uY2F0KHhoci5yZXNwb25zZS5lcnJvciB8fCB4aHIucmVzcG9uc2UpOwogIH0gZWxzZSBpZiAoeGhyLnJlc3BvbnNlVGV4dCkgewogICAgbXNnID0gIiIuY29uY2F0KHhoci5yZXNwb25zZVRleHQpOwogIH0gZWxzZSB7CiAgICBtc2cgPSAiZmFpbCB0byAiLmNvbmNhdChhY3Rpb24sICIgIikuY29uY2F0KHhoci5zdGF0dXMpOwogIH0KCiAgcmV0dXJuIG5ldyBFcnJvcihtc2cpOwp9CgpmdW5jdGlvbiBnZXRCb2R5KHhocikgewogIHZhciB0ZXh0ID0geGhyLnJlc3BvbnNlVGV4dCB8fCB4aHIucmVzcG9uc2U7CgogIGlmICghdGV4dCkgewogICAgcmV0dXJuIHRleHQ7CiAgfQoKICB0cnkgewogICAgcmV0dXJuIEpTT04ucGFyc2UodGV4dCk7CiAgfSBjYXRjaCAoZSkgewogICAgcmV0dXJuIHRleHQ7CiAgfQp9CgpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1cGxvYWQob3B0aW9uKSB7CiAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogIHZhciBhY3Rpb24gPSBvcHRpb24uYWN0aW9uOwoKICBpZiAoeGhyLnVwbG9hZCkgewogICAgeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gZnVuY3Rpb24gcHJvZ3Jlc3MoZSkgewogICAgICBpZiAoZS50b3RhbCA+IDApIHsKICAgICAgICBlLnBlcmNlbnQgPSBlLmxvYWRlZCAvIGUudG90YWwgKiAxMDA7CiAgICAgIH0KCiAgICAgIG9wdGlvbi5vblByb2dyZXNzKGUpOwogICAgfTsKICB9CgogIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwoKICBpZiAob3B0aW9uLmRhdGEpIHsKICAgIE9iamVjdC5rZXlzKG9wdGlvbi5kYXRhKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgZm9ybURhdGEuYXBwZW5kKGtleSwgb3B0aW9uLmRhdGFba2V5XSk7CiAgICB9KTsKICB9CgogIGZvcm1EYXRhLmFwcGVuZChvcHRpb24uZmlsZW5hbWUsIG9wdGlvbi5maWxlLCBvcHRpb24uZmlsZS5uYW1lKTsKCiAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiBlcnJvcihlKSB7CiAgICBvcHRpb24ub25FcnJvcihlKTsKICB9OwoKICB4aHIub25sb2FkID0gZnVuY3Rpb24gb25sb2FkKCkgewogICAgaWYgKHhoci5zdGF0dXMgPCAyMDAgfHwgeGhyLnN0YXR1cyA+PSAzMDApIHsKICAgICAgcmV0dXJuIG9wdGlvbi5vbkVycm9yKGdldEVycm9yKGFjdGlvbiwgb3B0aW9uLCB4aHIpKTsKICAgIH0KCiAgICBvcHRpb24ub25TdWNjZXNzKGdldEJvZHkoeGhyKSk7CiAgfTsKCiAgeGhyLm9wZW4oJ3Bvc3QnLCBhY3Rpb24sIHRydWUpOwoKICBpZiAob3B0aW9uLndpdGhDcmVkZW50aWFscyAmJiAnd2l0aENyZWRlbnRpYWxzJyBpbiB4aHIpIHsKICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlOwogIH0KCiAgdmFyIGhlYWRlcnMgPSBvcHRpb24uaGVhZGVycyB8fCB7fTsKCiAgZm9yICh2YXIgaXRlbSBpbiBoZWFkZXJzKSB7CiAgICBpZiAoaGVhZGVycy5oYXNPd25Qcm9wZXJ0eShpdGVtKSAmJiBoZWFkZXJzW2l0ZW1dICE9PSBudWxsKSB7CiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGl0ZW0sIGhlYWRlcnNbaXRlbV0pOwogICAgfQogIH0KCiAgeGhyLnNlbmQoZm9ybURhdGEpOwogIHJldHVybiB4aHI7Cn0="},{"version":3,"names":["getError","action","option","xhr","msg","response","error","responseText","status","Error","getBody","text","JSON","parse","e","upload","XMLHttpRequest","onprogress","progress","total","percent","loaded","onProgress","formData","FormData","data","Object","keys","forEach","key","append","filename","file","name","onerror","onError","onload","onSuccess","open","withCredentials","headers","item","hasOwnProperty","setRequestHeader","send"],"sources":["C:/Users/32179/Desktop/will-fire/willFire/vue/src/utils/ajaxUpload.js"],"sourcesContent":["function getError(action, option, xhr) {\n  let msg;\n  if (xhr.response) {\n    msg = `${xhr.response.error || xhr.response}`;\n  } else if (xhr.responseText) {\n    msg = `${xhr.responseText}`;\n  } else {\n    msg = `fail to ${action} ${xhr.status}`;\n  }\n\n  return new Error(msg);\n}\n\nfunction getBody(xhr) {\n  const text = xhr.responseText || xhr.response;\n  if (!text) {\n    return text;\n  }\n\n  try {\n    return JSON.parse(text);\n  } catch (e) {\n    return text;\n  }\n}\n\nexport default function upload(option) {\n  const xhr = new XMLHttpRequest();\n  const action = option.action;\n\n  if (xhr.upload) {\n    xhr.upload.onprogress = function progress(e) {\n      if (e.total > 0) {\n        e.percent = e.loaded / e.total * 100;\n      }\n      option.onProgress(e);\n    };\n  }\n\n  const formData = new FormData();\n\n  if (option.data) {\n    Object.keys(option.data).forEach(key => {\n      formData.append(key, option.data[key]);\n    });\n  }\n\n  formData.append(option.filename, option.file, option.file.name);\n\n  xhr.onerror = function error(e) {\n    option.onError(e);\n  };\n\n  xhr.onload = function onload() {\n    if (xhr.status < 200 || xhr.status >= 300) {\n      return option.onError(getError(action, option, xhr));\n    }\n\n    option.onSuccess(getBody(xhr));\n  };\n\n  xhr.open('post', action, true);\n\n  if (option.withCredentials && 'withCredentials' in xhr) {\n    xhr.withCredentials = true;\n  }\n\n  const headers = option.headers || {};\n\n  for (let item in headers) {\n    if (headers.hasOwnProperty(item) && headers[item] !== null) {\n      xhr.setRequestHeader(item, headers[item]);\n    }\n  }\n  xhr.send(formData);\n  return xhr;\n}\n"],"mappings":"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"}]}