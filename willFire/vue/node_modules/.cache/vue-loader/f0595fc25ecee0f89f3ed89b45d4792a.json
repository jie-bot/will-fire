{"remainingRequest":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\src\\components\\comment\\graffiti.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\src\\components\\comment\\graffiti.vue","mtime":1723964853960},{"path":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1723800259159},{"path":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1723800259743},{"path":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1723800259159},{"path":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1723800259896}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IHByb0J1dHRvbiA9ICgpID0+IGltcG9ydCggIi4uL2NvbW1vbi9wcm9CdXR0b24iKTsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBwcm9CdXR0b24KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb250ZXh0OiB7fSwKICAgICAgY2FudmFzTW92ZVVzZTogZmFsc2UsCiAgICAgIC8vIOWtmOWCqOW9k+WJjeihqOmdoueKtuaAgeaVsOe7hC3kuIrkuIDmraUKICAgICAgcHJlRHJhd0FyeTogW10sCiAgICAgIC8vIOWtmOWCqOW9k+WJjeihqOmdoueKtuaAgeaVsOe7hC3kuIvkuIDmraUKICAgICAgbmV4dERyYXdBcnk6IFtdLAogICAgICAvLyDkuK3pl7TmlbDnu4QKICAgICAgbWlkZGxlQXJ5OiBbXSwKICAgICAgLy8g6YWN572u5Y+C5pWwCiAgICAgIGNvbmZpZzogewogICAgICAgIGxpbmVXaWR0aDogNSwKICAgICAgICBsaW5lQ29sb3I6ICIjODE1NEEzIiwKICAgICAgICBzaGFkb3dCbHVyOiAyLAogICAgICB9LAogICAgICBjb2xvcnM6IFsiIzgxNTRBMyIsICIjZmVmNGFjIiwgIiMwMDE4YmEiLCAiI2ZmYzIwMCIsICIjZjMyZjE1IiwgIiNjY2NjY2MiLCAiIzVhYjYzOSJdLAogICAgICBicnVzaFNpemU6IFt7CiAgICAgICAgY2xhc3NOYW1lOiAic21hbGwgZWwtaWNvbi1lZGl0IiwKICAgICAgICBsaW5lV2lkdGg6IDUsCiAgICAgIH0sIHsKICAgICAgICBjbGFzc05hbWU6ICJtaWRkbGUgZWwtaWNvbi1lZGl0IiwKICAgICAgICBsaW5lV2lkdGg6IDEwLAogICAgICB9LCB7CiAgICAgICAgY2xhc3NOYW1lOiAiYmlnIGVsLWljb24tZWRpdCIsCiAgICAgICAgbGluZVdpZHRoOiAxNSwKICAgICAgfV0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgY29udHJvbHMoKSB7CiAgICAgIHJldHVybiBbewogICAgICAgIHRpdGxlOiAi5LiK5LiA5q2lIiwKICAgICAgICBhY3Rpb246ICJwcmV2IiwKICAgICAgICBjbGFzc05hbWU6IHRoaXMucHJlRHJhd0FyeS5sZW5ndGgKICAgICAgICAgID8gImFjdGl2ZSBlbC1pY29uLWFycm93LWxlZnQiCiAgICAgICAgICA6ICJiYW4gZWwtaWNvbi1hcnJvdy1sZWZ0IiwKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAi5LiL5LiA5q2lIiwKICAgICAgICBhY3Rpb246ICJuZXh0IiwKICAgICAgICBjbGFzc05hbWU6IHRoaXMubmV4dERyYXdBcnkubGVuZ3RoCiAgICAgICAgICA/ICJhY3RpdmUgZWwtaWNvbi1hcnJvdy1yaWdodCIKICAgICAgICAgIDogImJhbiBlbC1pY29uLWFycm93LXJpZ2h0IiwKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAi5riF6ZmkIiwKICAgICAgICBhY3Rpb246ICJjbGVhciIsCiAgICAgICAgY2xhc3NOYW1lOgogICAgICAgICAgdGhpcy5wcmVEcmF3QXJ5Lmxlbmd0aCB8fCB0aGlzLm5leHREcmF3QXJ5Lmxlbmd0aAogICAgICAgICAgICA/ICJhY3RpdmUgZWwtaWNvbi1yZWZyZXNoIgogICAgICAgICAgICA6ICJiYW4gZWwtaWNvbi1yZWZyZXNoIiwKICAgICAgfV07CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2NhbnZhcyIpOwogICAgdGhpcy5jb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoIjJkIiwge3dpbGxSZWFkRnJlcXVlbnRseTogdHJ1ZX0pOwogICAgdGhpcy5pbml0RHJhdygpOwogICAgdGhpcy5zZXRDYW52YXNTdHlsZSgpOwogIH0sCiAgY3JlYXRlZCgpIHsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNhbnZhc091dE1vdmUoZSkgewogICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjY2FudmFzIik7CiAgICAgIGlmIChlLnRhcmdldCAhPT0gY2FudmFzKSB7CiAgICAgICAgdGhpcy5jYW52YXNNb3ZlVXNlID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBpbml0RHJhdygpIHsKICAgICAgY29uc3QgcHJlRGF0YSA9IHRoaXMuY29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgMTIwMCwgNjAwKTsKICAgICAgLy8g56m657uY5Zu+6KGo6Z2i6L+b5qCICiAgICAgIHRoaXMubWlkZGxlQXJ5LnB1c2gocHJlRGF0YSk7CiAgICB9LAogICAgY2FudmFzVXAoZSkgewogICAgICBjb25zdCBwcmVEYXRhID0gdGhpcy5jb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCAxMjAwLCA2MDApOwogICAgICBpZiAoIXRoaXMubmV4dERyYXdBcnkubGVuZ3RoKSB7CiAgICAgICAgLy8g5b2T5YmN57uY5Zu+6KGo6Z2i6L+b5qCICiAgICAgICAgdGhpcy5taWRkbGVBcnkucHVzaChwcmVEYXRhKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm1pZGRsZUFyeSA9IFtdOwogICAgICAgIHRoaXMubWlkZGxlQXJ5ID0gdGhpcy5taWRkbGVBcnkuY29uY2F0KHRoaXMucHJlRHJhd0FyeSk7CiAgICAgICAgdGhpcy5taWRkbGVBcnkucHVzaChwcmVEYXRhKTsKICAgICAgICB0aGlzLm5leHREcmF3QXJ5ID0gW107CiAgICAgIH0KICAgICAgdGhpcy5jYW52YXNNb3ZlVXNlID0gZmFsc2U7CiAgICAgIHRoaXMuY29udGV4dC5iZWdpblBhdGgoKTsKICAgIH0sCiAgICBjYW52YXNEb3duKGUpIHsKICAgICAgdGhpcy5jYW52YXNNb3ZlVXNlID0gdHJ1ZTsKICAgICAgLy8gY2xpZW505piv5Z+65LqO5pW05Liq6aG16Z2i55qE5Z2Q5qCHCiAgICAgIC8vIG9mZnNldOaYr2NhbnZhc+i3neemu+mhtumDqOS7peWPiuW3pui+ueeahOi3neemuwogICAgICB0aGlzLnNldENhbnZhc1N0eWxlKCk7CiAgICAgIC8vIOa4hemZpOWtkOi3r+W+hAogICAgICB0aGlzLmNvbnRleHQuYmVnaW5QYXRoKCk7CiAgICAgIHRoaXMuY29udGV4dC5tb3ZlVG8oZS5sYXllclgsIGUubGF5ZXJZKTsKICAgICAgLy8g5b2T5YmN57uY5Zu+6KGo6Z2i54q25oCBCiAgICAgIGNvbnN0IHByZURhdGEgPSB0aGlzLmNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIDEyMDAsIDYwMCk7CiAgICAgIC8vIOW9k+WJjee7mOWbvuihqOmdoui/m+agiAogICAgICB0aGlzLnByZURyYXdBcnkucHVzaChwcmVEYXRhKTsKICAgIH0sCiAgICBjYW52YXNNb3ZlKGUpIHsKICAgICAgaWYgKHRoaXMuY2FudmFzTW92ZVVzZSkgewogICAgICAgIHRoaXMuY29udGV4dC5saW5lVG8oZS5sYXllclgsIGUubGF5ZXJZKTsKICAgICAgICB0aGlzLmNvbnRleHQuc3Ryb2tlKCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDorr7nva7nu5jnlLvphY3nva4KICAgIHNldENhbnZhc1N0eWxlKCkgewogICAgICB0aGlzLmNvbnRleHQubGluZVdpZHRoID0gdGhpcy5jb25maWcubGluZVdpZHRoOwogICAgICB0aGlzLmNvbnRleHQuc2hhZG93Qmx1ciA9IHRoaXMuY29uZmlnLnNoYWRvd0JsdXI7CiAgICAgIHRoaXMuY29udGV4dC5zaGFkb3dDb2xvciA9IHRoaXMuY29uZmlnLmxpbmVDb2xvcjsKICAgICAgdGhpcy5jb250ZXh0LnN0cm9rZVN0eWxlID0gdGhpcy5jb25maWcubGluZUNvbG9yOwogICAgfSwKICAgIC8vIOiuvue9ruminOiJsgogICAgc2V0Q29sb3IoY29sb3IpIHsKICAgICAgdGhpcy5jb25maWcubGluZUNvbG9yID0gY29sb3I7CiAgICB9LAogICAgLy8g6K6+572u56yU5Yi35aSn5bCPCiAgICBzZXRCcnVzaChzaXplKSB7CiAgICAgIHRoaXMuY29uZmlnLmxpbmVXaWR0aCA9IHNpemU7CiAgICB9LAogICAgY29udHJvbENhbnZhcyhhY3Rpb24pIHsKICAgICAgc3dpdGNoIChhY3Rpb24pIHsKICAgICAgICBjYXNlICJwcmV2IjoKICAgICAgICAgIGlmICh0aGlzLnByZURyYXdBcnkubGVuZ3RoKSB7CiAgICAgICAgICAgIGNvbnN0IHBvcERhdGEgPSB0aGlzLnByZURyYXdBcnkucG9wKCk7CiAgICAgICAgICAgIGNvbnN0IG1pZERhdGEgPSB0aGlzLm1pZGRsZUFyeVt0aGlzLnByZURyYXdBcnkubGVuZ3RoICsgMV07CiAgICAgICAgICAgIHRoaXMubmV4dERyYXdBcnkucHVzaChtaWREYXRhKTsKICAgICAgICAgICAgdGhpcy5jb250ZXh0LnB1dEltYWdlRGF0YShwb3BEYXRhLCAwLCAwKTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIm5leHQiOgogICAgICAgICAgaWYgKHRoaXMubmV4dERyYXdBcnkubGVuZ3RoKSB7CiAgICAgICAgICAgIGNvbnN0IHBvcERhdGEgPSB0aGlzLm5leHREcmF3QXJ5LnBvcCgpOwogICAgICAgICAgICBjb25zdCBtaWREYXRhID0gdGhpcy5taWRkbGVBcnlbdGhpcy5taWRkbGVBcnkubGVuZ3RoIC0gdGhpcy5uZXh0RHJhd0FyeS5sZW5ndGggLSAyXTsKICAgICAgICAgICAgdGhpcy5wcmVEcmF3QXJ5LnB1c2gobWlkRGF0YSk7CiAgICAgICAgICAgIHRoaXMuY29udGV4dC5wdXRJbWFnZURhdGEocG9wRGF0YSwgMCwgMCk7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJjbGVhciI6CiAgICAgICAgICB0aGlzLmNsZWFyQ29udGV4dCgpOwogICAgICAgICAgdGhpcy5taWRkbGVBcnkgPSBbdGhpcy5taWRkbGVBcnlbMF1dOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0sCiAgICBjbGVhckNvbnRleHQoKSB7CiAgICAgIHRoaXMuY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jb250ZXh0LmNhbnZhcy53aWR0aCwgdGhpcy5jb250ZXh0LmNhbnZhcy5oZWlnaHQpOwogICAgICB0aGlzLnByZURyYXdBcnkgPSBbXTsKICAgICAgdGhpcy5uZXh0RHJhd0FyeSA9IFtdOwogICAgfSwKICAgIHNob3dDb21tZW50KCkgewogICAgICB0aGlzLmNsZWFyQ29udGV4dCgpOwogICAgICB0aGlzLiRlbWl0KCJzaG93Q29tbWVudCIpOwogICAgfSwKICAgIGdldEltYWdlKCkgewogICAgICBpZiAodGhpcy4kY29tbW9uLmlzRW1wdHkodGhpcy4kc3RvcmUuc3RhdGUuY3VycmVudFVzZXIpKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAi6K+35YWI55m75b2V77yBIiwKICAgICAgICAgIHR5cGU6ICJlcnJvciIKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnByZURyYXdBcnkubGVuZ3RoIDwgMSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogIuS9oOi/mOayoeeUu+WRon4iLAogICAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjY2FudmFzIik7CiAgICAgIGNvbnN0IGRhdGFVUkwgPSBjYW52YXMudG9EYXRhVVJMKCJpbWFnZS9wbmciKTsKICAgICAgbGV0IGFyciA9IGRhdGFVUkwuc3BsaXQoIiwiKSwKICAgICAgICBtaW5lID0gYXJyWzBdLm1hdGNoKC86KC4qPyk7LylbMV0sCiAgICAgICAgc3RyID0gYXRvYihhcnJbMV0pLAogICAgICAgIG4gPSBzdHIubGVuZ3RoLAogICAgICAgIHU4YXJyID0gbmV3IFVpbnQ4QXJyYXkobik7CiAgICAgIHdoaWxlIChuLS0pIHsKICAgICAgICB1OGFycltuXSA9IHN0ci5jaGFyQ29kZUF0KG4pOwogICAgICB9CiAgICAgIGxldCBvYmogPSBuZXcgQmxvYihbdThhcnJdLCB7dHlwZTogbWluZX0pOwogICAgICBsZXQga2V5ID0gImdyYWZmaXRpIiArICIvIiArIHRoaXMuJHN0b3JlLnN0YXRlLmN1cnJlbnRVc2VyLnVzZXJuYW1lLnJlcGxhY2UoL1teYS16QS1aXS9nLCAnJykgKyB0aGlzLiRzdG9yZS5zdGF0ZS5jdXJyZW50VXNlci5pZCArIG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMCkgKyAiLnBuZyI7CgogICAgICBsZXQgc3RvcmVUeXBlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImRlZmF1bHRTdG9yZVR5cGUiKTsKCiAgICAgIGxldCBmZCA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmZC5hcHBlbmQoImZpbGUiLCBvYmopOwogICAgICBmZC5hcHBlbmQoImtleSIsIGtleSk7CiAgICAgIGZkLmFwcGVuZCgicmVsYXRpdmVQYXRoIiwga2V5KTsKICAgICAgZmQuYXBwZW5kKCJ0eXBlIiwgImdyYWZmaXRpIik7CiAgICAgIGZkLmFwcGVuZCgic3RvcmVUeXBlIiwgc3RvcmVUeXBlKTsKCiAgICAgIGlmIChzdG9yZVR5cGUgPT09ICJsb2NhbCIpIHsKICAgICAgICB0aGlzLnNhdmVMb2NhbChmZCk7CiAgICAgIH0gZWxzZSBpZiAoc3RvcmVUeXBlID09PSAicWluaXUiKSB7CiAgICAgICAgdGhpcy5zYXZlUWluaXUoZmQpOwogICAgICB9CiAgICB9LAogICAgc2F2ZUxvY2FsKGZkKSB7CiAgICAgIHRoaXMuJGh0dHAudXBsb2FkKCJodHRwOi8vNDcuOTYuODYuMjIzOjgwODEvYXBpIiArICIvcmVzb3VyY2UvdXBsb2FkIiwgZmQpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKCF0aGlzLiRjb21tb24uaXNFbXB0eShyZXMuZGF0YSkpIHsKICAgICAgICAgICAgdGhpcy5jbGVhckNvbnRleHQoKTsKICAgICAgICAgICAgbGV0IHVybCA9IHJlcy5kYXRhOwogICAgICAgICAgICBsZXQgaW1nID0gIlvkvaDnlLvmiJHnjJwsIiArIHVybCArICJdIjsKICAgICAgICAgICAgdGhpcy4kZW1pdCgiYWRkR3JhZmZpdGlDb21tZW50IiwgaW1nKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLAogICAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0sCiAgICBzYXZlUWluaXUoZmQpIHsKICAgICAgdGhpcy4kaHR0cC5nZXQoImh0dHA6Ly80Ny45Ni44Ni4yMjM6ODA4MS9hcGkiICsgIi9xaW5pdS9nZXRVcFRva2VuIiwge2tleTogZmQuZ2V0KCJrZXkiKX0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKCF0aGlzLiRjb21tb24uaXNFbXB0eShyZXMuZGF0YSkpIHsKICAgICAgICAgICAgZmQuYXBwZW5kKCJ0b2tlbiIsIHJlcy5kYXRhKTsKCiAgICAgICAgICAgIHRoaXMuJGh0dHAudXBsb2FkUWluaXUodGhpcy4kc3RvcmUuc3RhdGUuc3lzQ29uZmlnLnFpbml1VXJsLCBmZCkKICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuJGNvbW1vbi5pc0VtcHR5KHJlcy5rZXkpKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDb250ZXh0KCk7CiAgICAgICAgICAgICAgICAgIGxldCB1cmwgPSB0aGlzLiRzdG9yZS5zdGF0ZS5zeXNDb25maWdbJ3Fpbml1LmRvd25sb2FkVXJsJ10gKyByZXMua2V5OwogICAgICAgICAgICAgICAgICBsZXQgZmlsZSA9IGZkLmdldCgiZmlsZSIpOwogICAgICAgICAgICAgICAgICB0aGlzLiRjb21tb24uc2F2ZVJlc291cmNlKHRoaXMsICJncmFmZml0aSIsIHVybCwgZmlsZS5zaXplLCBmaWxlLnR5cGUsIG51bGwsICJxaW5pdSIpOwogICAgICAgICAgICAgICAgICBsZXQgaW1nID0gIlvkvaDnlLvmiJHnjJwsIiArIHVybCArICJdIjsKICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgiYWRkR3JhZmZpdGlDb21tZW50IiwgaW1nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLAogICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLAogICAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["graffiti.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"graffiti.vue","sourceRoot":"src/components/comment","sourcesContent":["<template>\n  <div>\n    <!-- 画布 -->\n    <div style=\"padding: 5px\" @mousemove=\"canvasOutMove($event)\" @touchmove=\"canvasOutMove($event)\">\n      <div class=\"graffiti-container\">\n        <canvas id=\"canvas\"\n                width=\"766\"\n                height=\"400\"\n                @mousedown=\"canvasDown($event)\"\n                @mouseup=\"canvasUp($event)\"\n                @mousemove=\"canvasMove($event)\"\n                @touchstart=\"canvasDown($event)\"\n                @touchend=\"canvasUp($event)\"\n                @touchmove=\"canvasMove($event)\">\n        </canvas>\n      </div>\n    </div>\n\n    <div style=\"padding: 10px 0 0 5px;\">\n      <!-- 颜色 -->\n      <div class=\"graffiti-tools\">\n        <span class=\"graffiti-title\">画笔颜色</span>\n        <div class=\"myCenter\" style=\"margin-left: 2rem\">\n          <div v-for=\"(color, index) in colors\"\n               :class=\"{ activeColor: config.lineColor === color }\"\n               :style=\"{ background: color }\"\n               @click=\"setColor(color)\"\n               class=\"graffiti-color\"\n               :key=\"index\">\n          </div>\n        </div>\n      </div>\n\n      <!-- 大小 -->\n      <div class=\"graffiti-tools\">\n        <span class=\"graffiti-title\">画笔大小</span>\n        <div class=\"myCenter\" style=\"margin-left: 2rem\">\n          <i v-for=\"(pen, index) in brushSize\"\n             :key=\"index\"\n             class=\"graffiti-size\"\n             :class=\"[pen.className, { activeSize: config.lineWidth === pen.lineWidth }]\"\n             @click=\"setBrush(pen.lineWidth)\">\n          </i>\n        </div>\n      </div>\n\n      <!-- 操作 -->\n      <div class=\"graffiti-tools\">\n        <span class=\"graffiti-title\">操作</span>\n        <div class=\"myCenter\" style=\"margin-left: 3.7rem\">\n          <i v-for=\"(control, index) in controls\"\n             :title=\"control.title\"\n             :class=\"control.className\"\n             class=\"graffiti-operate\"\n             @click=\"controlCanvas(control.action)\"\n             :key=\"index\">\n          </i>\n        </div>\n      </div>\n\n      <!-- 按钮 -->\n      <div class=\"graffiti-tools\" style=\"justify-content: center\">\n        <proButton :info=\"'文字'\"\n                   @click.native=\"showComment()\"\n                   :before=\"$constant.before_color_1\"\n                   :after=\"$constant.after_color_1\"\n                   style=\"margin-right: 6px\">\n        </proButton>\n        <proButton :info=\"'提交'\"\n                   @click.native=\"getImage()\"\n                   :before=\"$constant.before_color_2\"\n                   :after=\"$constant.after_color_2\">\n        </proButton>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  const proButton = () => import( \"../common/proButton\");\n\n  export default {\n    components: {\n      proButton\n    },\n    data() {\n      return {\n        context: {},\n        canvasMoveUse: false,\n        // 存储当前表面状态数组-上一步\n        preDrawAry: [],\n        // 存储当前表面状态数组-下一步\n        nextDrawAry: [],\n        // 中间数组\n        middleAry: [],\n        // 配置参数\n        config: {\n          lineWidth: 5,\n          lineColor: \"#8154A3\",\n          shadowBlur: 2,\n        },\n        colors: [\"#8154A3\", \"#fef4ac\", \"#0018ba\", \"#ffc200\", \"#f32f15\", \"#cccccc\", \"#5ab639\"],\n        brushSize: [{\n          className: \"small el-icon-edit\",\n          lineWidth: 5,\n        }, {\n          className: \"middle el-icon-edit\",\n          lineWidth: 10,\n        }, {\n          className: \"big el-icon-edit\",\n          lineWidth: 15,\n        }]\n      };\n    },\n    computed: {\n      controls() {\n        return [{\n          title: \"上一步\",\n          action: \"prev\",\n          className: this.preDrawAry.length\n            ? \"active el-icon-arrow-left\"\n            : \"ban el-icon-arrow-left\",\n        }, {\n          title: \"下一步\",\n          action: \"next\",\n          className: this.nextDrawAry.length\n            ? \"active el-icon-arrow-right\"\n            : \"ban el-icon-arrow-right\",\n        }, {\n          title: \"清除\",\n          action: \"clear\",\n          className:\n            this.preDrawAry.length || this.nextDrawAry.length\n              ? \"active el-icon-refresh\"\n              : \"ban el-icon-refresh\",\n        }];\n      }\n    },\n    mounted() {\n      const canvas = document.querySelector(\"#canvas\");\n      this.context = canvas.getContext(\"2d\", {willReadFrequently: true});\n      this.initDraw();\n      this.setCanvasStyle();\n    },\n    created() {\n    },\n    methods: {\n      canvasOutMove(e) {\n        const canvas = document.querySelector(\"#canvas\");\n        if (e.target !== canvas) {\n          this.canvasMoveUse = false;\n        }\n      },\n      initDraw() {\n        const preData = this.context.getImageData(0, 0, 1200, 600);\n        // 空绘图表面进栈\n        this.middleAry.push(preData);\n      },\n      canvasUp(e) {\n        const preData = this.context.getImageData(0, 0, 1200, 600);\n        if (!this.nextDrawAry.length) {\n          // 当前绘图表面进栈\n          this.middleAry.push(preData);\n        } else {\n          this.middleAry = [];\n          this.middleAry = this.middleAry.concat(this.preDrawAry);\n          this.middleAry.push(preData);\n          this.nextDrawAry = [];\n        }\n        this.canvasMoveUse = false;\n        this.context.beginPath();\n      },\n      canvasDown(e) {\n        this.canvasMoveUse = true;\n        // client是基于整个页面的坐标\n        // offset是canvas距离顶部以及左边的距离\n        this.setCanvasStyle();\n        // 清除子路径\n        this.context.beginPath();\n        this.context.moveTo(e.layerX, e.layerY);\n        // 当前绘图表面状态\n        const preData = this.context.getImageData(0, 0, 1200, 600);\n        // 当前绘图表面进栈\n        this.preDrawAry.push(preData);\n      },\n      canvasMove(e) {\n        if (this.canvasMoveUse) {\n          this.context.lineTo(e.layerX, e.layerY);\n          this.context.stroke();\n        }\n      },\n      // 设置绘画配置\n      setCanvasStyle() {\n        this.context.lineWidth = this.config.lineWidth;\n        this.context.shadowBlur = this.config.shadowBlur;\n        this.context.shadowColor = this.config.lineColor;\n        this.context.strokeStyle = this.config.lineColor;\n      },\n      // 设置颜色\n      setColor(color) {\n        this.config.lineColor = color;\n      },\n      // 设置笔刷大小\n      setBrush(size) {\n        this.config.lineWidth = size;\n      },\n      controlCanvas(action) {\n        switch (action) {\n          case \"prev\":\n            if (this.preDrawAry.length) {\n              const popData = this.preDrawAry.pop();\n              const midData = this.middleAry[this.preDrawAry.length + 1];\n              this.nextDrawAry.push(midData);\n              this.context.putImageData(popData, 0, 0);\n            }\n            break;\n          case \"next\":\n            if (this.nextDrawAry.length) {\n              const popData = this.nextDrawAry.pop();\n              const midData = this.middleAry[this.middleAry.length - this.nextDrawAry.length - 2];\n              this.preDrawAry.push(midData);\n              this.context.putImageData(popData, 0, 0);\n            }\n            break;\n          case \"clear\":\n            this.clearContext();\n            this.middleAry = [this.middleAry[0]];\n            break;\n        }\n      },\n      clearContext() {\n        this.context.clearRect(0, 0, this.context.canvas.width, this.context.canvas.height);\n        this.preDrawAry = [];\n        this.nextDrawAry = [];\n      },\n      showComment() {\n        this.clearContext();\n        this.$emit(\"showComment\");\n      },\n      getImage() {\n        if (this.$common.isEmpty(this.$store.state.currentUser)) {\n          this.$message({\n            message: \"请先登录！\",\n            type: \"error\"\n          });\n          return;\n        }\n\n        if (this.preDrawAry.length < 1) {\n          this.$message({\n            message: \"你还没画呢~\",\n            type: \"warning\"\n          });\n          return;\n        }\n\n        const canvas = document.querySelector(\"#canvas\");\n        const dataURL = canvas.toDataURL(\"image/png\");\n        let arr = dataURL.split(\",\"),\n          mine = arr[0].match(/:(.*?);/)[1],\n          str = atob(arr[1]),\n          n = str.length,\n          u8arr = new Uint8Array(n);\n        while (n--) {\n          u8arr[n] = str.charCodeAt(n);\n        }\n        let obj = new Blob([u8arr], {type: mine});\n        let key = \"graffiti\" + \"/\" + this.$store.state.currentUser.username.replace(/[^a-zA-Z]/g, '') + this.$store.state.currentUser.id + new Date().getTime() + Math.floor(Math.random() * 1000) + \".png\";\n\n        let storeType = localStorage.getItem(\"defaultStoreType\");\n\n        let fd = new FormData();\n        fd.append(\"file\", obj);\n        fd.append(\"key\", key);\n        fd.append(\"relativePath\", key);\n        fd.append(\"type\", \"graffiti\");\n        fd.append(\"storeType\", storeType);\n\n        if (storeType === \"local\") {\n          this.saveLocal(fd);\n        } else if (storeType === \"qiniu\") {\n          this.saveQiniu(fd);\n        }\n      },\n      saveLocal(fd) {\n        this.$http.upload(\"http://47.96.86.223:8081/api\" + \"/resource/upload\", fd)\n          .then((res) => {\n            if (!this.$common.isEmpty(res.data)) {\n              this.clearContext();\n              let url = res.data;\n              let img = \"[你画我猜,\" + url + \"]\";\n              this.$emit(\"addGraffitiComment\", img);\n            }\n          })\n          .catch((error) => {\n            this.$message({\n              message: error.message,\n              type: \"error\"\n            });\n          });\n      },\n      saveQiniu(fd) {\n        this.$http.get(\"http://47.96.86.223:8081/api\" + \"/qiniu/getUpToken\", {key: fd.get(\"key\")})\n          .then((res) => {\n            if (!this.$common.isEmpty(res.data)) {\n              fd.append(\"token\", res.data);\n\n              this.$http.uploadQiniu(this.$store.state.sysConfig.qiniuUrl, fd)\n                .then((res) => {\n                  if (!this.$common.isEmpty(res.key)) {\n                    this.clearContext();\n                    let url = this.$store.state.sysConfig['qiniu.downloadUrl'] + res.key;\n                    let file = fd.get(\"file\");\n                    this.$common.saveResource(this, \"graffiti\", url, file.size, file.type, null, \"qiniu\");\n                    let img = \"[你画我猜,\" + url + \"]\";\n                    this.$emit(\"addGraffitiComment\", img);\n                  }\n                })\n                .catch((error) => {\n                  this.$message({\n                    message: error.message,\n                    type: \"error\"\n                  });\n                });\n            }\n          })\n          .catch((error) => {\n            this.$message({\n              message: error.message,\n              type: \"error\"\n            });\n          });\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .graffiti-container {\n    overflow: hidden;\n    border: 2px var(--lightGray) solid;\n    border-radius: 4px;\n  }\n\n  .graffiti-tools {\n    display: flex;\n    align-items: center;\n    margin-bottom: 10px;\n  }\n\n  .graffiti-title {\n    font-size: 14px;\n  }\n\n  .graffiti-color {\n    width: 1rem;\n    height: 1rem;\n    border-radius: 50%;\n    float: left;\n    margin-right: 20px;\n    cursor: pointer;\n    transition: all 0.2s;\n  }\n\n  .graffiti-color:hover {\n    width: 1.3rem;\n    height: 1.3rem;\n  }\n\n  .activeColor {\n    width: 1.3rem;\n    height: 1.3rem;\n  }\n\n  .graffiti-size {\n    cursor: pointer;\n    margin-right: 20px;\n  }\n\n  .graffiti-size.small {\n    font-size: 14px;\n  }\n\n  .graffiti-size.middle {\n    font-size: 16px;\n  }\n\n  .graffiti-size.big {\n    font-size: 18px;\n  }\n\n  .activeSize {\n    background-color: var(--themeBackground);\n    color: var(--white);\n    border-radius: 50%;\n    padding: 2px;\n  }\n\n  .graffiti-operate {\n    margin-right: 20px;\n    cursor: pointer;\n    font-size: 18px;\n  }\n\n  .graffiti-operate.ban {\n    cursor: not-allowed\n  }\n</style>\n"]}]}