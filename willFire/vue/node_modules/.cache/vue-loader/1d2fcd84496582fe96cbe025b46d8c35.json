{"remainingRequest":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\src\\components\\comment\\commentBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\src\\components\\comment\\commentBox.vue","mtime":1723904277904},{"path":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1723800259159},{"path":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1723800259743},{"path":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1723800259159},{"path":"C:\\Users\\32179\\Desktop\\will-fire\\willFire\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1723800259896}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IGVtb2ppID0gKCkgPT4gaW1wb3J0KCAiLi4vY29tbW9uL2Vtb2ppIik7CmNvbnN0IHByb0J1dHRvbiA9ICgpID0+IGltcG9ydCggIi4uL2NvbW1vbi9wcm9CdXR0b24iKTsKY29uc3QgdXBsb2FkUGljdHVyZSA9ICgpID0+IGltcG9ydCggIi4uL2NvbW1vbi91cGxvYWRQaWN0dXJlIik7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgZW1vamksCiAgICBwcm9CdXR0b24sCiAgICB1cGxvYWRQaWN0dXJlCiAgfSwKICBwcm9wczogewogICAgZGlzYWJsZUdyYWZmaXRpOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY29tbWVudENvbnRlbnQ6ICIiLAogICAgICBzaG93RW1vamk6IGZhbHNlLAogICAgICBzaG93UGljdHVyZTogZmFsc2UsCiAgICAgIHBpY3R1cmU6IHsKICAgICAgICBuYW1lOiB0aGlzLiRzdG9yZS5zdGF0ZS5jdXJyZW50VXNlci51c2VybmFtZSwKICAgICAgICB1cmw6ICIiCiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBvcGVuUGljdHVyZSgpIHsKICAgICAgaWYgKHRoaXMuJGNvbW1vbi5pc0VtcHR5KHRoaXMuJHN0b3JlLnN0YXRlLmN1cnJlbnRVc2VyKSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogIuivt+WFiOeZu+W9le+8gSIsCiAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLnNob3dQaWN0dXJlID0gdHJ1ZTsKICAgIH0sCgogICAgYWRkUGljdHVyZShyZXMpIHsKICAgICAgdGhpcy5waWN0dXJlLnVybCA9IHJlczsKICAgICAgdGhpcy5zYXZlUGljdHVyZSgpOwogICAgfSwKICAgIHNhdmVQaWN0dXJlKCkgewogICAgICBsZXQgaW1nID0gIlsiICsgdGhpcy5waWN0dXJlLm5hbWUgKyAiLCIgKyB0aGlzLnBpY3R1cmUudXJsICsgIl0iOwogICAgICB0aGlzLmNvbW1lbnRDb250ZW50ICs9IGltZzsKICAgICAgdGhpcy5waWN0dXJlLnVybCA9ICIiOwogICAgICB0aGlzLnNob3dQaWN0dXJlID0gZmFsc2U7CiAgICB9LAogICAgYWRkRW1vamkoa2V5KSB7CiAgICAgIHRoaXMuY29tbWVudENvbnRlbnQgKz0ga2V5OwogICAgfSwKICAgIHNob3dHcmFmZml0aSgpIHsKICAgICAgaWYgKHRoaXMuJGNvbW1vbi5pc0VtcHR5KHRoaXMuJHN0b3JlLnN0YXRlLmN1cnJlbnRVc2VyKSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogIuivt+WFiOeZu+W9le+8gSIsCiAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmNvbW1lbnRDb250ZW50ID0gIiI7CiAgICAgIHRoaXMuJGVtaXQoInNob3dHcmFmZml0aSIpOwogICAgfSwKICAgIHN1Ym1pdENvbW1lbnQoKSB7CiAgICAgIGlmICh0aGlzLiRjb21tb24uaXNFbXB0eSh0aGlzLiRzdG9yZS5zdGF0ZS5jdXJyZW50VXNlcikpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICLor7flhYjnmbvlvZXvvIEiLAogICAgICAgICAgdHlwZTogImVycm9yIgogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuY29tbWVudENvbnRlbnQudHJpbSgpID09PSAiIikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogIuS9oOi/mOayoeWGmeWRon4iLAogICAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuJGVtaXQoInN1Ym1pdENvbW1lbnQiLCB0aGlzLmNvbW1lbnRDb250ZW50LnRyaW0oKSk7CiAgICAgIHRoaXMuY29tbWVudENvbnRlbnQgPSAiIjsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["commentBox.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"commentBox.vue","sourceRoot":"src/components/comment","sourcesContent":["<template>\n  <div>\n    <!-- 框 -->\n    <textarea\n      class=\"comment-textarea\"\n      v-model=\"commentContent\"\n      placeholder=\"写下点什么...\"\n      maxlength=\"1000\"/>\n    <!-- 按钮 -->\n    <div class=\"myBetween\" style=\"margin-bottom: 10px\">\n      <div style=\"display: flex\">\n        <div :class=\"{'emoji-active':showEmoji}\"\n             @click=\"showEmoji = !showEmoji\">\n          <i class=\"el-icon-orange myEmoji\"></i>\n        </div>\n        <div @click=\"openPicture()\">\n          <i class=\"el-icon-picture myPicture\"></i>\n        </div>\n      </div>\n\n      <div style=\"display: flex\">\n       <!-- <proButton :info=\"'涂鸦'\"\n                  v-show=\"!$common.mobile() && !disableGraffiti\"\n                  @click.native=\"showGraffiti()\"\n                  :before=\"$constant.before_color_1\"\n                  :after=\"$constant.after_color_1\"\n                  style=\"margin-right: 6px\">\n       </proButton> -->\n        <proButton :info=\"'提交'\"\n                   @click.native=\"submitComment()\"\n                   :before=\"$constant.before_color_2\"\n                   :after=\"$constant.after_color_2\">\n        </proButton>\n      </div>\n    </div>\n    <!-- 表情 -->\n    <emoji @addEmoji=\"addEmoji\" :showEmoji=\"showEmoji\"></emoji>\n\n    <el-dialog title=\"图片\"\n               :visible.sync=\"showPicture\"\n               width=\"25%\"\n               :append-to-body=\"true\"\n               :close-on-click-modal=\"false\"\n               destroy-on-close\n               center>\n      <div>\n        <uploadPicture :prefix=\"'commentPicture'\" @addPicture=\"addPicture\" :maxSize=\"2\"\n                       :maxNumber=\"1\"></uploadPicture>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  const emoji = () => import( \"../common/emoji\");\n  const proButton = () => import( \"../common/proButton\");\n  const uploadPicture = () => import( \"../common/uploadPicture\");\n\n  export default {\n    components: {\n      emoji,\n      proButton,\n      uploadPicture\n    },\n    props: {\n      disableGraffiti: {\n        type: Boolean,\n        default: false\n      }\n    },\n    data() {\n      return {\n        commentContent: \"\",\n        showEmoji: false,\n        showPicture: false,\n        picture: {\n          name: this.$store.state.currentUser.username,\n          url: \"\"\n        }\n      };\n    },\n    methods: {\n      openPicture() {\n        if (this.$common.isEmpty(this.$store.state.currentUser)) {\n          this.$message({\n            message: \"请先登录！\",\n            type: \"error\"\n          });\n          return;\n        }\n\n        this.showPicture = true;\n      },\n\n      addPicture(res) {\n        this.picture.url = res;\n        this.savePicture();\n      },\n      savePicture() {\n        let img = \"[\" + this.picture.name + \",\" + this.picture.url + \"]\";\n        this.commentContent += img;\n        this.picture.url = \"\";\n        this.showPicture = false;\n      },\n      addEmoji(key) {\n        this.commentContent += key;\n      },\n      showGraffiti() {\n        if (this.$common.isEmpty(this.$store.state.currentUser)) {\n          this.$message({\n            message: \"请先登录！\",\n            type: \"error\"\n          });\n          return;\n        }\n\n        this.commentContent = \"\";\n        this.$emit(\"showGraffiti\");\n      },\n      submitComment() {\n        if (this.$common.isEmpty(this.$store.state.currentUser)) {\n          this.$message({\n            message: \"请先登录！\",\n            type: \"error\"\n          });\n          return;\n        }\n\n        if (this.commentContent.trim() === \"\") {\n          this.$message({\n            message: \"你还没写呢~\",\n            type: \"warning\"\n          });\n          return;\n        }\n        this.$emit(\"submitComment\", this.commentContent.trim());\n        this.commentContent = \"\";\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .comment-textarea {\n    border: 1px solid var(--lightGray);\n    width: 100%;\n    font-size: 14px;\n    padding: 15px;\n    min-height: 180px;\n    /* 不改变大小 */\n    resize: none;\n    /* 不改变边框 */\n    outline: none;\n    border-radius: 4px;\n    background-image: var(--commentURL);\n    background-size: contain;\n    background-repeat: no-repeat;\n    background-position: 100%;\n    margin-bottom: 10px;\n  }\n\n  .comment-textarea:focus {\n    border-color: var(--themeBackground);\n  }\n\n  .myEmoji {\n    font-size: 18px;\n    cursor: pointer;\n    transition: all 0.5s;\n    margin-right: 12px;\n  }\n\n  .myEmoji:hover {\n    transform: rotate(360deg);\n    font-size: 22px;\n  }\n\n  .myPicture {\n    font-size: 18px;\n    cursor: pointer;\n  }\n\n  .emoji-active {\n    color: var(--red);\n  }\n</style>\n"]}]}